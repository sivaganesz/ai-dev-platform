import{r as l,t as je}from"./index-BCiwssk4.js";import{at as ze,l as U,au as Y,av as q,aw as De,ax as oe,c as z,ay as Me,az as Ke,V as N,aA as Le,a as K,b as L,ap as pe,e as me,aB as he,aC as Ne,aD as Te,aE as le,aF as Fe,aG as se,aH as _e,L as R,p as Re,r as We,D as ee,u as xe,f as Ge,S as $e,g as Ue,Z as ae,h as ye,k as Ve,ab as Ze,aI as Je,i as Xe,j as W,n as ge,aJ as Ye,aK as qe,aL as ue,x as be,E as He,B as Ie,q as Qe,J as ea,t as j,v as aa,C as ra,z as ta,aM as na,aN as ia,aO as ce,N as oa}from"./CategoricalChart-Bh3gHgaB.js";import{C as la,u as Pe,a as Ae,b as ke}from"./tooltipContext-CA0WRoRU.js";import{S as sa}from"./ActiveShapeUtils-Dbbm0Wpw.js";import{S as ua}from"./ErrorBarContext-jl1rQoiN.js";import{u as ca,G as da,C as va}from"./CartesianChart-CtP7DrOF.js";import{s as D,a as M}from"./graphicalItemSelectors-DMoC6oeC.js";var de=(e,a,r)=>{var t=r??e;if(!U(t))return Y(t,a,0)},fa=(e,a,r)=>{var t={},i=e.filter(ze),n=e.filter(u=>u.stackId==null),o=i.reduce((u,c)=>{var p=u[c.stackId];return p==null&&(p=[]),p.push(c),u[c.stackId]=p,u},t),s=Object.entries(o).map(u=>{var c,[p,f]=u,g=f.map(h=>h.dataKey),y=de(a,r,(c=f[0])===null||c===void 0?void 0:c.barSize);return{stackId:p,dataKeys:g,barSize:y}}),v=n.map(u=>{var c=[u.dataKey].filter(f=>f!=null),p=de(a,r,u.barSize);return{stackId:void 0,dataKeys:c,barSize:p}});return[...s,...v]};function ve(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,t)}return r}function _(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ve(Object(r),!0).forEach(function(t){pa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pa(e,a,r){return(a=ma(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ma(e){var a=ha(e,"string");return typeof a=="symbol"?a:a+""}function ha(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function xa(e,a,r,t,i){var n,o=t.length;if(!(o<1)){var s=Y(e,r,0,!0),v,u=[];if(q((n=t[0])===null||n===void 0?void 0:n.barSize)){var c=!1,p=r/o,f=t.reduce((m,P)=>m+(P.barSize||0),0);f+=(o-1)*s,f>=r&&(f-=(o-1)*s,s=0),f>=r&&p>0&&(c=!0,p*=.9,f=o*p);var g=(r-f)/2>>0,y={offset:g-s,size:0};v=t.reduce((m,P)=>{var x,k={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:y.offset+y.size+s,size:c?p:(x=P.barSize)!==null&&x!==void 0?x:0}},I=[...m,k];return y=k.position,I},u)}else{var h=Y(a,r,0,!0);r-2*h-(o-1)*s<=0&&(s=0);var b=(r-2*h-(o-1)*s)/o;b>1&&(b>>=0);var d=q(i)?Math.min(b,i):b;v=t.reduce((m,P,x)=>[...m,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:h+(b+s)*x+(b-d)/2,size:d}}],u)}return v}}var ya=(e,a,r,t,i,n,o)=>{var s=U(o)?a:o,v=xa(r,t,i!==n?i:n,e,s);return i!==n&&v!=null&&(v=v.map(u=>_(_({},u),{},{position:_(_({},u.position),{},{offset:u.position.offset-i/2})}))),v},ga=(e,a)=>{var r=De(a);if(!(!e||r==null||a==null)){var{stackId:t}=a;if(t!=null){var i=e[t];if(i){var{stackedData:n}=i;if(n)return n.find(o=>o.key===r)}}}},ba=(e,a)=>{if(!(e==null||a==null)){var r=e.find(t=>t.stackId===a.stackId&&a.dataKey!=null&&t.dataKeys.includes(a.dataKey));if(r!=null)return r.position}};function Ia(e,a){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&q(e.zIndex)?e.zIndex:a}var Pa="Invariant failed";function Aa(e,a){throw new Error(Pa)}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},H.apply(null,arguments)}function G(e){return l.createElement(sa,H({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var ka=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(t,i)=>{if(oe(a))return a;var n=oe(t)||U(t);return n?a(t,i):(n||Aa(),r)}},Ba=(e,a,r)=>r,Ea=(e,a)=>a,F=z([me,Ea],(e,a)=>e.filter(r=>r.type==="bar").find(r=>r.id===a)),Oa=z([F],e=>e?.maxBarSize),Sa=(e,a,r,t)=>t,Ca=z([N,me,D,M,Ba],(e,a,r,t,i)=>a.filter(n=>e==="horizontal"?n.xAxisId===r:n.yAxisId===t).filter(n=>n.isPanorama===i).filter(n=>n.hide===!1).filter(n=>n.type==="bar")),wa=(e,a,r)=>{var t=N(e),i=D(e,a),n=M(e,a);if(!(i==null||n==null))return t==="horizontal"?le(e,"yAxis",n,r):le(e,"xAxis",i,r)},ja=(e,a)=>{var r=N(e),t=D(e,a),i=M(e,a);if(!(t==null||i==null))return r==="horizontal"?se(e,"xAxis",t):se(e,"yAxis",i)},za=z([Ca,Fe,ja],fa),Da=(e,a,r)=>{var t,i,n=F(e,a);if(n==null)return 0;var o=D(e,a),s=M(e,a);if(o==null||s==null)return 0;var v=N(e),u=he(e),{maxBarSize:c}=n,p=U(c)?u:c,f,g;return v==="horizontal"?(f=K(e,"xAxis",o,r),g=L(e,"xAxis",o,r)):(f=K(e,"yAxis",s,r),g=L(e,"yAxis",s,r)),(t=(i=pe(f,g,!0))!==null&&i!==void 0?i:p)!==null&&t!==void 0?t:0},Be=(e,a,r)=>{var t=N(e),i=D(e,a),n=M(e,a);if(!(i==null||n==null)){var o,s;return t==="horizontal"?(o=K(e,"xAxis",i,r),s=L(e,"xAxis",i,r)):(o=K(e,"yAxis",n,r),s=L(e,"yAxis",n,r)),pe(o,s)}},Ma=z([za,he,Ne,Te,Da,Be,Oa],ya),Ka=(e,a,r)=>{var t=D(e,a);if(t!=null)return K(e,"xAxis",t,r)},La=(e,a,r)=>{var t=M(e,a);if(t!=null)return K(e,"yAxis",t,r)},Na=(e,a,r)=>{var t=D(e,a);if(t!=null)return L(e,"xAxis",t,r)},Ta=(e,a,r)=>{var t=M(e,a);if(t!=null)return L(e,"yAxis",t,r)},Fa=z([Ma,F],ba),_a=z([wa,F],ga),Ra=z([Me,Ke,Ka,La,Na,Ta,Fa,N,Le,Be,_a,F,Sa],(e,a,r,t,i,n,o,s,v,u,c,p,f)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:h}=v;if(!(p==null||o==null||a==null||s!=="horizontal"&&s!=="vertical"||r==null||t==null||i==null||n==null||u==null)){var{data:b}=p,d;if(b!=null&&b.length>0?d=b:d=g?.slice(y,h+1),d!=null)return mr({layout:s,barSettings:p,pos:o,parentViewBox:a,bandSize:u,xAxis:r,yAxis:t,xAxisTicks:i,yAxisTicks:n,stackedData:c,displayedData:d,offset:e,cells:f,dataStartIndex:y})}}),Wa=["index"];function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Q.apply(null,arguments)}function Ga(e,a){if(e==null)return{};var r,t,i=$a(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)r=n[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $a(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var Ee=l.createContext(void 0),Ua=e=>{var a=l.useContext(Ee);if(a!=null)return a.stackId;if(e!=null)return _e(e)},Va=(e,a)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(a),Za=e=>{var a=l.useContext(Ee);if(a!=null){var{stackId:r}=a;return"url(#".concat(Va(r,e),")")}},Oe=e=>{var{index:a}=e,r=Ga(e,Wa),t=Za(a);return l.createElement(R,Q({className:"recharts-bar-stack-layer",clipPath:t},r))},Ja=["onMouseEnter","onMouseLeave","onClick"],Xa=["value","background","tooltipPosition"],Ya=["id"],qa=["onMouseEnter","onClick","onMouseLeave"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},C.apply(null,arguments)}function fe(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,t)}return r}function A(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?fe(Object(r),!0).forEach(function(t){Ha(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ha(e,a,r){return(a=Qa(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Qa(e){var a=er(e,"string");return typeof a=="symbol"?a:a+""}function er(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function $(e,a){if(e==null)return{};var r,t,i=ar(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)r=n[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ar(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var rr=e=>{var{dataKey:a,name:r,fill:t,legendType:i,hide:n}=e;return[{inactive:n,dataKey:a,type:i,color:t,value:ye(r,a),payload:e}]},tr=l.memo(e=>{var{dataKey:a,stroke:r,strokeWidth:t,fill:i,name:n,hide:o,unit:s,tooltipType:v,id:u}=e,c={dataDefinedOnItem:void 0,getPosition:Ze,settings:{stroke:r,strokeWidth:t,fill:i,dataKey:a,nameKey:void 0,name:ye(n,a),hide:o,type:v,color:i,unit:s,graphicalItemId:u}};return l.createElement(Ve,{tooltipEntrySettings:c})});function nr(e){var a=W(be),{data:r,dataKey:t,background:i,allOtherBarProps:n}=e,{onMouseEnter:o,onMouseLeave:s,onClick:v}=n,u=$(n,Ja),c=Pe(o,t,n.id),p=Ae(s),f=ke(v,t,n.id);if(!i||r==null)return null;var g=He(i);return l.createElement(ae,{zIndex:Ia(i,ee.barBackground)},r.map((y,h)=>{var{value:b,background:d,tooltipPosition:m}=y,P=$(y,Xa);if(!d)return null;var x=c(y,h),k=p(y,h),I=f(y,h),O=A(A(A(A(A({option:i,isActive:String(h)===a},P),{},{fill:"#eee"},d),g),Ie(u,y,h)),{},{onMouseEnter:x,onMouseLeave:k,onClick:I,dataKey:t,index:h,className:"recharts-bar-background-rectangle"});return l.createElement(G,C({key:"background-bar-".concat(h)},O))}))}function ir(e){var{showLabels:a,children:r,rects:t}=e,i=t?.map(n=>{var o={x:n.x,y:n.y,width:n.width,lowerWidth:n.width,upperWidth:n.width,height:n.height};return A(A({},o),{},{value:n.value,payload:n.payload,parentViewBox:n.parentViewBox,viewBox:o,fill:n.fill})});return l.createElement(ra,{value:a?i:void 0},r)}function or(e){var{shape:a,activeBar:r,baseProps:t,entry:i,index:n,dataKey:o}=e,s=W(be),v=W(na),u=r&&String(n)===s&&(v==null||o===v),c=u?r:a;return u?l.createElement(ae,{zIndex:ee.activeBar},l.createElement(Oe,{index:n},l.createElement(G,C({},t,{name:String(t.name)},i,{isActive:u,option:c,index:n,dataKey:o})))):l.createElement(G,C({},t,{name:String(t.name)},i,{isActive:u,option:c,index:n,dataKey:o}))}function lr(e){var{shape:a,baseProps:r,entry:t,index:i,dataKey:n}=e;return l.createElement(G,C({},r,{name:String(r.name)},t,{isActive:!1,option:a,index:i,dataKey:n}))}function sr(e){var a,{data:r,props:t}=e,i=(a=ta(t))!==null&&a!==void 0?a:{},{id:n}=i,o=$(i,Ya),{shape:s,dataKey:v,activeBar:u}=t,{onMouseEnter:c,onClick:p,onMouseLeave:f}=t,g=$(t,qa),y=Pe(c,v,n),h=Ae(f),b=ke(p,v,n);return r?l.createElement(l.Fragment,null,r.map((d,m)=>l.createElement(Oe,C({index:m,key:"rectangle-".concat(d?.x,"-").concat(d?.y,"-").concat(d?.value,"-").concat(m),className:"recharts-bar-rectangle"},Ie(g,d,m),{onMouseEnter:y(d,m),onMouseLeave:h(d,m),onClick:b(d,m)}),u?l.createElement(or,{shape:s,activeBar:u,baseProps:o,entry:d,index:m,dataKey:v}):l.createElement(lr,{shape:s,baseProps:o,entry:d,index:m,dataKey:v})))):null}function ur(e){var{props:a,previousRectanglesRef:r}=e,{data:t,layout:i,isAnimationActive:n,animationBegin:o,animationDuration:s,animationEasing:v,onAnimationEnd:u,onAnimationStart:c}=a,p=r.current,f=Qe(a,"recharts-bar-"),[g,y]=l.useState(!1),h=!g,b=l.useCallback(()=>{typeof u=="function"&&u(),y(!1)},[u]),d=l.useCallback(()=>{typeof c=="function"&&c(),y(!0)},[c]);return l.createElement(ir,{showLabels:h,rects:t},l.createElement(ea,{animationId:f,begin:o,duration:s,isActive:n,easing:v,onAnimationEnd:b,onAnimationStart:d,key:f},m=>{var P=m===1?t:t?.map((x,k)=>{var I=p&&p[k];if(I)return A(A({},x),{},{x:j(I.x,x.x,m),y:j(I.y,x.y,m),width:j(I.width,x.width,m),height:j(I.height,x.height,m)});if(i==="horizontal"){var O=j(0,x.height,m),S=j(x.stackedBarStart,x.y,m);return A(A({},x),{},{y:S,height:O})}var B=j(0,x.width,m),E=j(x.stackedBarStart,x.x,m);return A(A({},x),{},{width:B,x:E})});return m>0&&(r.current=P??null),P==null?null:l.createElement(R,null,l.createElement(sr,{props:a,data:P}))}),l.createElement(aa,{label:a.label}),a.children)}function cr(e){var a=l.useRef(null);return l.createElement(ur,{previousRectanglesRef:a,props:e})}var Se=0,dr=(e,a)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ge(e,a)}};class vr extends l.PureComponent{render(){var{hide:a,data:r,dataKey:t,className:i,xAxisId:n,yAxisId:o,needClip:s,background:v,id:u}=this.props;if(a||r==null)return null;var c=je("recharts-bar",i),p=u;return l.createElement(R,{className:c,id:u},s&&l.createElement("defs",null,l.createElement(da,{clipPathId:p,xAxisId:n,yAxisId:o})),l.createElement(R,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(p,")"):void 0},l.createElement(nr,{data:r,dataKey:t,background:v,allOtherBarProps:this.props}),l.createElement(cr,this.props)))}}var fr={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Se,xAxisId:0,yAxisId:0,zIndex:ee.bar};function pr(e){var{xAxisId:a,yAxisId:r,hide:t,legendType:i,minPointSize:n,activeBar:o,animationBegin:s,animationDuration:v,animationEasing:u,isAnimationActive:c}=e,{needClip:p}=ca(a,r),f=Je(),g=xe(),y=Xe(e.children,la),h=W(m=>Ra(m,e.id,g,y));if(f!=="vertical"&&f!=="horizontal")return null;var b,d=h?.[0];return d==null||d.height==null||d.width==null?b=0:b=f==="vertical"?d.height/2:d.width/2,l.createElement(ua,{xAxisId:a,yAxisId:r,data:h,dataPointFormatter:dr,errorBarOffset:b},l.createElement(vr,C({},e,{layout:f,needClip:p,data:h,xAxisId:a,yAxisId:r,hide:t,legendType:i,minPointSize:n,activeBar:o,animationBegin:s,animationDuration:v,animationEasing:u,isAnimationActive:c})))}function mr(e){var{layout:a,barSettings:{dataKey:r,minPointSize:t},pos:i,bandSize:n,xAxis:o,yAxis:s,xAxisTicks:v,yAxisTicks:u,stackedData:c,displayedData:p,offset:f,cells:g,parentViewBox:y,dataStartIndex:h}=e,b=a==="horizontal"?s:o,d=c?b.scale.domain():null,m=Ye({numericAxis:b}),P=b.scale.map(m);return p.map((x,k)=>{var I,O,S,B,E,V;if(c){var re=c[k+h];if(re==null)return null;I=qe(re,d)}else I=ge(x,r),Array.isArray(I)||(I=[m,I]);var w=ka(t,Se)(I[1],k);if(a==="horizontal"){var Z,J=s.scale.map(I[0]),T=s.scale.map(I[1]);if(J==null||T==null)return null;O=ue({axis:o,ticks:v,bandSize:n,offset:i.offset,entry:x,index:k}),S=(Z=T??J)!==null&&Z!==void 0?Z:void 0,B=i.size;var te=J-T;if(E=ia(te)?0:te,V={x:O,y:f.top,width:B,height:f.height},Math.abs(w)>0&&Math.abs(E)<Math.abs(w)){var ne=ce(E||w)*(Math.abs(w)-Math.abs(E));S-=ne,E+=ne}}else{var X=o.scale.map(I[0]),ie=o.scale.map(I[1]);if(X==null||ie==null)return null;if(O=X,S=ue({axis:s,ticks:u,bandSize:n,offset:i.offset,entry:x,index:k}),B=ie-X,E=i.size,V={x:f.left,y:S,width:f.width,height:E},Math.abs(w)>0&&Math.abs(B)<Math.abs(w)){var Ce=ce(B||w)*(Math.abs(w)-Math.abs(B));B+=Ce}}if(O==null||S==null||B==null||E==null)return null;var we=A(A({},x),{},{stackedBarStart:P,x:O,y:S,width:B,height:E,value:c?I:I[1],payload:x,background:V,tooltipPosition:{x:O+B/2,y:S+E/2},parentViewBox:y},g&&g[k]&&g[k].props);return we}).filter(Boolean)}function hr(e){var a=We(e,fr),r=Ua(a.stackId),t=xe();return l.createElement(Ge,{id:a.id,type:"bar"},i=>l.createElement(l.Fragment,null,l.createElement($e,{legendPayload:rr(a)}),l.createElement(tr,{dataKey:a.dataKey,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,unit:a.unit,tooltipType:a.tooltipType,id:i}),l.createElement(Ue,{type:"bar",id:i,data:void 0,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,stackId:r,hide:a.hide,barSize:a.barSize,minPointSize:a.minPointSize,maxBarSize:a.maxBarSize,isPanorama:t}),l.createElement(ae,{zIndex:a.zIndex},l.createElement(pr,C({},a,{id:i})))))}var xr=l.memo(hr,Re);xr.displayName="Bar";var yr=["axis","item"],Er=l.forwardRef((e,a)=>l.createElement(va,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yr,tooltipPayloadSearcher:oa,categoricalChartProps:e,ref:a}));export{Er as B,xr as a};
