import{e as y,r as l,j as e,d as R,W as A,i as f,B as i,c as T,U as I}from"./index-BCiwssk4.js";import{C as m,a as x,b as p,c as u,d as L}from"./card-BFKiiVyG.js";import{C as S}from"./cpu-D_insEa0.js";import{C as j}from"./clock-BRr6Aeit.js";import{E as k}from"./external-link-CH5rxQI2.js";import{C as N}from"./circle-alert-Jnhn6_R7.js";import{C as h}from"./circle-play-DHZwlcRO.js";import{L as C}from"./layers-B6uRp5Uq.js";import{C as U}from"./chevron-down-DHnmizAH.js";import{H as E}from"./history-BzVmeYr6.js";import{T as D}from"./triangle-alert-DWyxYOT3.js";import{R as O}from"./refresh-cw-D5KsgFTF.js";import{L as G}from"./layout-grid-DCy-QvN1.js";import{M as B}from"./monitor-CSAQPBW7.js";const F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],g=y("circle-stop",F),W=[{id:"LP-001",name:"Frontend Sandbox Preview",sandboxId:"SB-001",url:"https://sandbox.ai-platform.com/frontend-preview",status:"RUNNING",lastUpdated:"2026-02-12T10:45:00Z",version:"v1.0.3",agentResponsible:"AG-001",linkedWorkflow:"WF-2001"},{id:"LP-002",name:"Backend API Preview",sandboxId:"SB-002",url:"https://sandbox.ai-platform.com/backend-preview",status:"STOPPED",lastUpdated:"2026-02-12T11:05:00Z",version:"v1.0.1",agentResponsible:"AG-002",linkedWorkflow:"WF-2002"},{id:"LP-003",name:"FullStack Demo Preview",sandboxId:"SB-003",url:"https://sandbox.ai-platform.com/fullstack-preview",status:"ERROR",lastUpdated:"2026-02-11T16:50:00Z",version:"v0.9.5",agentResponsible:"AG-004",linkedWorkflow:"WF-2003"}],H=[{id:"PV-001",previewId:"LP-001",version:"v1.0.3",updatedAt:"2026-02-12T10:45:00Z",notes:"Updated UI theme to match corporate standards.",agentId:"AG-001"},{id:"PV-002",previewId:"LP-001",version:"v1.0.2",updatedAt:"2026-02-11T09:30:00Z",notes:"Fixed navigation bug in mobile view.",agentId:"AG-001"},{id:"PV-003",previewId:"LP-002",version:"v1.0.1",updatedAt:"2026-02-12T11:05:00Z",notes:"Added new endpoints for user authentication.",agentId:"AG-002"}],Z=[{id:"LPA-001",previewId:"LP-001",previewName:"Frontend Sandbox Preview",action:"START",agentId:"AG-001",timestamp:"2026-02-12T10:45:00Z",details:"Preview environment started successfully."},{id:"LPA-002",previewId:"LP-002",previewName:"Backend API Preview",action:"STOP",agentId:"AG-002",timestamp:"2026-02-12T11:05:00Z",details:"Manual stop requested by agent."},{id:"LPA-003",previewId:"LP-003",previewName:"FullStack Demo Preview",action:"ERROR",agentId:"AG-004",timestamp:"2026-02-11T16:50:00Z",details:"Connection timeout while fetching resources."}],V=()=>{const[t,a]=l.useState([]),[r,s]=l.useState([]),[d,c]=l.useState([]),[v,w]=l.useState(!0);l.useEffect(()=>{const n=setTimeout(()=>{a(W),s(H),c(Z),w(!1)},500);return()=>clearTimeout(n)},[]);const b={total:t.length,running:t.filter(n=>n.status==="RUNNING").length,stopped:t.filter(n=>n.status==="STOPPED").length,error:t.filter(n=>n.status==="ERROR").length,lastUpdated:t.length>0?[...t].sort((n,P)=>new Date(P.lastUpdated).getTime()-new Date(n.lastUpdated).getTime())[0]:null};return{previews:t,versionHistory:r,activities:d,metrics:b,isLoading:v}},M=({preview:t})=>{const a=r=>{switch(r){case"RUNNING":return e.jsxs(i,{className:"bg-green-500/10 text-green-500 border-green-500/20 gap-1",children:[e.jsx(h,{className:"w-3 h-3"})," RUNNING"]});case"STOPPED":return e.jsxs(i,{variant:"secondary",className:"gap-1",children:[e.jsx(g,{className:"w-3 h-3"})," STOPPED"]});case"ERROR":return e.jsxs(i,{variant:"destructive",className:"gap-1",children:[e.jsx(N,{className:"w-3 h-3"})," ERROR"]});default:return e.jsx(i,{variant:"outline",children:r})}};return e.jsxs(m,{className:"group hover:border-primary/50 transition-all shadow-sm hover:shadow-md h-full flex flex-col",children:[e.jsx(x,{className:"pb-3 bg-muted/5",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{className:"text-lg font-bold group-hover:text-primary transition-colors",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:t.version}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:t.id})]})]}),a(t.status)]})}),e.jsxs(u,{className:"py-4 space-y-4 flex-1",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"})," Sandbox"]}),e.jsx("span",{className:"font-medium",children:t.sandboxId})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"})," Responsible Agent"]}),e.jsx("span",{className:"font-medium",children:t.agentResponsible})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"})," Linked Workflow"]}),e.jsx("span",{className:"font-medium",children:t.linkedWorkflow})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground pt-4 border-t mt-auto",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3"}),"Last Updated:"]}),e.jsx("span",{className:"font-medium text-foreground",children:new Date(t.lastUpdated).toLocaleString()})]})]}),e.jsx(L,{className:"pt-3 border-t bg-muted/5",children:e.jsxs(f,{variant:"outline",className:"w-full gap-2 group-hover:bg-primary group-hover:text-primary-foreground transition-colors",onClick:()=>window.open(t.url,"_blank"),disabled:t.status!=="RUNNING",children:[e.jsx(k,{className:"w-4 h-4"}),"Live Preview URL"]})})]})},o=({title:t,value:a,icon:r,description:s,colorClass:d="text-primary"})=>e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:t}),e.jsx(r,{className:`h-4 w-4 ${d}`})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),s&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:s})]})]}),_=({versions:t})=>{const[a,r]=l.useState(null);return e.jsxs(m,{className:"shadow-sm",children:[e.jsx(x,{className:"pb-3 border-b bg-muted/10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-primary"}),e.jsx(p,{className:"text-sm font-bold uppercase tracking-tight",children:"Version History"})]})}),e.jsx(u,{className:"p-0",children:e.jsxs("div",{className:"divide-y",children:[t.map(s=>e.jsxs("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:[e.jsxs("button",{className:"w-full flex justify-between items-center",onClick:()=>r(a===s.id?null:s.id),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"outline",className:"font-mono text-[10px]",children:s.version}),e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:new Date(s.updatedAt).toLocaleDateString()})]}),e.jsx(U,{className:T("w-4 h-4 text-muted-foreground transition-transform",a===s.id&&"rotate-180")})]}),a===s.id&&e.jsxs("div",{className:"pt-3 space-y-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(I,{className:"w-3 h-3"}),e.jsxs("span",{children:["Agent: ",e.jsx("span",{className:"text-foreground font-medium",children:s.agentId})]})]}),e.jsx("div",{className:"p-2 rounded bg-muted/50 border text-xs text-muted-foreground italic",children:s.notes})]})]},s.id)),t.length===0&&e.jsx("div",{className:"p-8 text-center text-sm text-muted-foreground",children:"No version history available."})]})})]})},q=({activities:t})=>{const a=s=>{switch(s){case"START":return e.jsx(h,{className:"w-4 h-4 text-green-500"});case"STOP":return e.jsx(g,{className:"w-4 h-4 text-slate-500"});case"UPDATE":return e.jsx(O,{className:"w-4 h-4 text-blue-500"});case"ERROR":return e.jsx(D,{className:"w-4 h-4 text-red-500"});default:return null}},r=s=>{switch(s){case"START":return e.jsx(i,{className:"bg-green-500/10 text-green-500 border-green-500/20 text-[10px] h-4",children:"START"});case"STOP":return e.jsx(i,{variant:"secondary",className:"text-[10px] h-4",children:"STOP"});case"UPDATE":return e.jsx(i,{className:"bg-blue-500/10 text-blue-500 border-blue-500/20 text-[10px] h-4",children:"UPDATE"});case"ERROR":return e.jsx(i,{variant:"destructive",className:"text-[10px] h-4",children:"ERROR"});default:return null}};return e.jsxs(m,{className:"shadow-sm",children:[e.jsx(x,{className:"pb-3 border-b bg-muted/10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-primary"}),e.jsx(p,{className:"text-sm font-bold uppercase tracking-tight",children:"Recent Interactions"})]})}),e.jsx(u,{className:"p-0",children:e.jsxs("div",{className:"divide-y",children:[t.map(s=>e.jsxs("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"mt-0.5",children:a(s.action)}),e.jsx("span",{className:"text-sm font-bold leading-none",children:s.previewName})]}),r(s.action)]}),e.jsxs("div",{className:"flex flex-col gap-1.5 ml-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground font-medium",children:[e.jsx("span",{children:"Agent:"}),e.jsx("span",{className:"text-foreground px-1.5 py-0.5 bg-muted rounded text-[10px]",children:s.agentId})]}),s.details&&e.jsx("p",{className:"text-[11px] text-muted-foreground line-clamp-1",children:s.details}),e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:new Date(s.timestamp).toLocaleString()})]})]},s.id)),t.length===0&&e.jsx("div",{className:"p-8 text-center text-sm text-muted-foreground",children:"No recent interactions recorded."})]})})]})};function le(){const{previews:t,versionHistory:a,activities:r,metrics:s,isLoading:d}=V();return d?e.jsx("div",{className:"flex h-[400px] items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-b pb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Live UI Previews"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Real-time validation of sandboxed applications and workflow components."})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{variant:"outline",className:"gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Refresh All"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{title:"Total Previews",value:s.total,icon:B,colorClass:"text-blue-500"}),e.jsx(o,{title:"Running",value:s.running,icon:h,colorClass:"text-green-500",description:"Active preview instances"}),e.jsx(o,{title:"Stopped",value:s.stopped,icon:g,colorClass:"text-slate-500"}),e.jsx(o,{title:"Errors",value:s.error,icon:N,colorClass:"text-red-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["Preview Instances",e.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-muted rounded-full text-muted-foreground",children:t.length})]}),e.jsxs("div",{className:"flex gap-2 text-[10px] text-muted-foreground items-center",children:[e.jsx(j,{className:"w-3 h-3"}),e.jsxs("span",{children:["Last global sync: ",new Date().toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.map(c=>e.jsx(M,{preview:c},c.id)),t.length===0&&e.jsx("div",{className:"col-span-full text-center py-20 border-2 border-dashed rounded-xl",children:e.jsx("p",{className:"text-muted-foreground",children:"No live previews available."})})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(_,{versions:a}),e.jsx(q,{activities:r})]})]})]})}export{le as default};
