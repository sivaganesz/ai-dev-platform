import{k as D,j as e,p as R,A as S,q as T,a as E,B as o,i as P,s as k,n as L}from"./index-CyvJUZqR.js";import{u as O}from"./use-senior-developers-data-DQmG4M6c.js";import{C as l,a as n,b as d,c,d as I}from"./card-9e5eR-TL.js";import{C as N}from"./circle-check-LM3MRdPF.js";import{F as B}from"./file-search-BTZYwrZa.js";import{S as G}from"./shield-alert-D94mR99W.js";import{P as F}from"./progress-DPoL9SyL.js";import{R as v,T as b}from"./CategoricalChart-WJAmy3lP.js";import{B as H,a as M}from"./BarChart-gLJDjHRP.js";import{C as W}from"./CartesianGrid-BmRwr4Ov.js";import{X as $,Y as V}from"./CartesianChart-Kxs-tJ8o.js";import{C as w}from"./tooltipContext-BhFxnOuu.js";import{P as K,a as Q}from"./PieChart-CsfmQ4gU.js";import{L as U}from"./Legend-121kkJQm.js";import{T as X,a as Y,b as u,c as x,d as _,e as m}from"./table-DPilA-Lh.js";import{s as p}from"./seniorDevelopersData-DFrZ6X3t.js";import{C as q}from"./circle-alert-BykDmaaL.js";import{C}from"./clock-BXrF9XKR.js";import{C as z}from"./circle-check-big-Dxdm1KJx.js";import{T as J}from"./triangle-alert-BFLjuX3_.js";import{M as Z}from"./message-square-CpLMVWv4.js";import{C as ee}from"./circle-x-DJq7SFxD.js";import"./useQuery-DOA-4dB4.js";import"./ActiveShapeUtils-tTCqnt4A.js";import"./ErrorBarContext-BO_Rq41O.js";import"./graphicalItemSelectors-01I7ku9s.js";import"./PolarChart-D353rnxE.js";function se({metrics:s}){const i=[{title:"Total Senior Developers",value:s.totalSeniorDevs,icon:D,description:"Technical authority layer",color:"text-blue-600"},{title:"Active Approvals",value:s.activeApprovals,icon:N,description:"Pending deployment signs",color:"text-green-600"},{title:"Pending Reviews",value:s.pendingReviews,icon:B,description:"Code & workflow reviews",color:"text-yellow-600"},{title:"ADR Decisions (Month)",value:s.adrDecisionsThisMonth,icon:G,description:"Architecture decisions",color:"text-purple-600"}];return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:i.map(t=>e.jsxs(l,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]})]},t.title))})}function ae({developer:s}){const i=R();return e.jsxs(l,{className:"overflow-hidden",children:[e.jsxs(n,{className:"flex flex-row items-center gap-4 pb-4",children:[e.jsxs(S,{className:"h-12 w-12 border",children:[e.jsx(T,{src:s.avatar,alt:s.name}),e.jsx(E,{children:s.name.substring(0,2).toUpperCase()})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold leading-none",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.role})]}),e.jsxs(o,{variant:"outline",className:"ml-auto",children:[s.experienceYears,"y Exp"]})]}),e.jsxs(c,{className:"grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Approvals"}),e.jsx("span",{className:"font-medium",children:s.approvalsHandled})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Reviews"}),e.jsx("span",{className:"font-medium",children:s.reviewsCompleted})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Success Rate"}),e.jsxs("span",{className:"font-medium",children:[s.successRate,"%"]})]}),e.jsx(F,{value:s.successRate,className:"h-2"})]})]}),e.jsx(I,{children:e.jsx(P,{variant:"secondary",className:"w-full",onClick:()=>i(`/governance/senior-developers/${s.id}`),children:"View Governance Profile"})})]})}const g=["#2563eb","#16a34a","#d97706","#9333ea","#db2777"];function re({data:s}){return e.jsxs(l,{className:"col-span-2",children:[e.jsx(n,{children:e.jsx(d,{children:"Approval Workload Distribution"})}),e.jsx(c,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(H,{data:s,children:[e.jsx(W,{strokeDasharray:"3 3",vertical:!1}),e.jsx($,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),e.jsx(V,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),e.jsx(b,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(M,{dataKey:"activeApprovals",radius:[4,4,0,0],children:s.map((i,t)=>e.jsx(w,{fill:g[t%g.length]},`cell-${t}`))})]})})})})]})}const f=["#2563eb","#16a34a","#d97706","#9333ea"];function te({data:s}){return e.jsxs(l,{className:"col-span-1",children:[e.jsx(n,{children:e.jsx(d,{children:"Code Review Distribution"})}),e.jsx(c,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(K,{children:[e.jsx(Q,{data:s,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:s.map((i,t)=>e.jsx(w,{fill:f[t%f.length]},`cell-${t}`))}),e.jsx(b,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(U,{verticalAlign:"bottom",height:36})]})})})})]})}function ie({decisions:s}){const i=a=>{switch(a){case"ACCEPTED":return"bg-green-100 text-green-800";case"PROPOSED":return"bg-yellow-100 text-yellow-800";case"DEPRECATED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},t=a=>p.find(r=>r.id===a)?.name||a;return e.jsxs(l,{className:"col-span-1",children:[e.jsx(n,{children:e.jsx(d,{children:"Architecture Decisions (ADR)"})}),e.jsx(c,{children:e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(u,{children:[e.jsx(x,{children:"Decision Title"}),e.jsx(x,{children:"Impacted Systems"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"Owner"})]})}),e.jsx(_,{children:s.map(a=>e.jsxs(u,{children:[e.jsx(m,{className:"font-medium",children:a.title}),e.jsx(m,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a.impactedSystems.map(r=>e.jsx(o,{variant:"outline",className:"text-[10px]",children:r},r))})}),e.jsx(m,{children:e.jsx(o,{className:i(a.status),children:a.status})}),e.jsx(m,{className:"text-sm",children:t(a.ownerId)})]},a.id))})]})})]})}function le({escalations:s}){const i=a=>{switch(a){case"HIGH":return"bg-red-100 text-red-800";case"MEDIUM":return"bg-orange-100 text-orange-800";case"LOW":return"bg-blue-100 text-blue-800"}},t=a=>p.find(r=>r.id===a)?.name||a;return e.jsxs(l,{className:"col-span-1",children:[e.jsx(n,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-red-500"}),"Escalation Queue"]})}),e.jsx(c,{className:"grid gap-4",children:s.map(a=>e.jsxs("div",{className:"flex items-start justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:a.issueTitle}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Raised by: ",a.raisedBy]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Assigned: ",t(a.assignedTo)]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(o,{className:i(a.severity),children:a.severity}),e.jsx("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:a.status==="OPEN"?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-3 w-3"})," In Progress"]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-3 w-3 text-green-500"})," Resolved"]})})]})]},a.id))})]})}function ne({activities:s}){const i=r=>{switch(r){case"APPROVAL":return e.jsx(L,{className:"h-4 w-4 text-green-500"});case"CODE_REVIEW":return e.jsx(k,{className:"h-4 w-4 text-blue-500"});case"ADR":return e.jsx(Z,{className:"h-4 w-4 text-purple-500"});case"ESCALATION":return e.jsx(J,{className:"h-4 w-4 text-red-500"})}},t=r=>{switch(r){case"APPROVED":return e.jsx(N,{className:"h-3 w-3 text-green-500"});case"REJECTED":return e.jsx(ee,{className:"h-3 w-3 text-red-500"});case"PENDING":return e.jsx(C,{className:"h-3 w-3 text-yellow-500"})}},a=r=>p.find(h=>h.id===r)?.name||r;return e.jsxs(l,{className:"col-span-full",children:[e.jsx(n,{children:e.jsx(d,{children:"Recent Governance Activities"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-6",children:s.map(r=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1 rounded-full border p-2 bg-muted/50",children:i(r.type)}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:r.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(r.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(o,{variant:"outline",className:"text-[10px]",children:r.type}),e.jsxs("span",{children:["Handled by: ",e.jsx("span",{className:"text-foreground font-medium",children:a(r.handledBy)})]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Project: ",r.projectId]}),e.jsxs("span",{className:"ml-auto flex items-center gap-1",children:[t(r.status),r.status]})]})]})]},r.id))})})]})}function Ie(){const{developers:s,activities:i,escalationQueue:t,architectureDecisions:a,metrics:r,reviewDistribution:h,approvalWorkload:A,isLoading:y}=O();return y?e.jsx("div",{children:"Loading Governance Layer..."}):e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Senior Developers Governance"}),e.jsx("p",{className:"text-muted-foreground",children:"Technical authority, approvals, and architecture oversight."})]}),e.jsx(se,{metrics:r}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:s?.map(j=>e.jsx(ae,{developer:j},j.id))}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsx(re,{data:A}),e.jsx(te,{data:h})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(ie,{decisions:a||[]}),e.jsx(le,{escalations:t||[]})]}),e.jsx(ne,{activities:i||[]})]})}export{Ie as default};
