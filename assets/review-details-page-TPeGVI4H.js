import{u as v,p as N,j as e,i as p,B as t,U as b,n as w,W as y,C}from"./index-BCiwssk4.js";import{a as k}from"./use-code-reviews-data-HXZreR-p.js";import{C as l,a as i,b as c,c as n}from"./card-BFKiiVyG.js";import{s as S}from"./seniorDevelopersData-DFrZ6X3t.js";import{P as h}from"./progress-Dcq2j96H.js";import{C as I}from"./chevron-left-FFtb6K7-.js";import{F as E}from"./fingerprint-pattern-DKZEv6iT.js";import{M as R}from"./message-square-QDLg7jRk.js";import{S as D}from"./shield-alert-lnTdjJbd.js";import"./useQuery-DHQUI4b3.js";function O(){const{id:u}=v(),d=N(),{data:r,isLoading:f}=k(u||"");if(f)return e.jsx("div",{children:"Loading Quality Intelligence..."});if(!r||!r.review)return e.jsx("div",{children:"Review not found"});const{review:s,comments:o,defects:x}=r,m=a=>S.find(g=>g.id===a)?.name||a,j=a=>a>=90?"text-green-600":a>=75?"text-blue-600":a>=50?"text-orange-600":"text-red-600";return e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>d(-1),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Code Review Intelligence"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(l,{className:"md:col-span-2",children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(t,{variant:"outline",children:s.id}),e.jsxs("span",{children:["Project: ",s.projectId]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Workflow: ",s.workflowId]})]})]}),e.jsx(t,{variant:s.status==="APPROVED"?"default":"secondary",children:s.status.replace("_"," ")})]})}),e.jsxs(n,{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Type"}),e.jsx("span",{children:s.reviewType})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Reviewer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:m(s.reviewerId)})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Contributor"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.agentId||"Human Developer"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Created At"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("h3",{className:"text-sm font-bold mb-4 flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-primary"}),"Governance Gate Impact"]}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg border",children:e.jsxs("p",{className:"text-sm",children:[s.status==="APPROVED"&&"Code quality standards met. Approval chain has been initiated for deployment.",s.status==="CHANGES_REQUESTED"&&"Structural or logic issues detected. Re-execution of agent task required before next review cycle.",s.status==="REJECTED"&&"Critical policy violations detected. This contribution is blocked from entering the release stream.",s.status==="PENDING"&&"Technical authority is currently evaluating architecture compliance and security risk."]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("h3",{className:"text-sm font-bold mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-primary"}),"Linked Approvals"]}),s.approvalId?e.jsxs(p,{variant:"outline",className:"w-fit",onClick:()=>d(`/governance/approvals/${s.approvalId}`),children:["View Approval: ",s.approvalId]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No approval request linked yet."})]})]})]}),e.jsxs(l,{className:"md:col-span-1",children:[e.jsx(i,{children:e.jsx(c,{children:"Quality Metrics"})}),e.jsxs(n,{className:"grid gap-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-bold uppercase",children:"Aggregated Score"}),e.jsxs("div",{className:`text-5xl font-bold ${j(s.qualityScore)}`,children:[s.qualityScore,"%"]}),e.jsx(h,{value:s.qualityScore,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t pt-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Defects"}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:s.defectCount})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Risk Level"}),e.jsx(t,{variant:s.qualityScore<75?"destructive":"outline",className:"w-fit",children:s.qualityScore>=90?"LOW":s.qualityScore>=75?"MEDIUM":"HIGH"})]})]}),e.jsxs("div",{className:"border-t pt-6 space-y-4",children:[e.jsxs("h4",{className:"text-xs font-bold uppercase text-muted-foreground flex items-center gap-2",children:[e.jsx(C,{className:"h-3.5 w-3.5"})," Defect Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[x.map(a=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{children:a.type}),e.jsxs("span",{className:"font-bold",children:[a.count," issues"]})]}),e.jsx(h,{value:a.count/(s.defectCount||1)*100,className:"h-1"})]},a.type)),x.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"No defects detected."})]})]})]})]})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"text-lg flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Reviewer Observations"]})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:o.length>0?o.map(a=>e.jsxs("div",{className:"p-4 border rounded-lg bg-muted/20 flex gap-4",children:[e.jsx("div",{className:`mt-1 h-2 w-2 rounded-full shrink-0 ${a.severity==="HIGH"?"bg-red-500":a.severity==="MEDIUM"?"bg-orange-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-sm",children:m(a.reviewer)}),e.jsxs(t,{variant:"outline",className:"text-[8px] h-4",children:[a.severity," SEVERITY"]})]}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:new Date(a.timestamp).toLocaleString()})]}),e.jsxs("p",{className:"text-sm italic",children:['"',a.comment,'"']})]})]},a.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground flex flex-col items-center gap-2",children:[e.jsx(D,{className:"h-8 w-8 opacity-20"}),e.jsx("p",{children:"No critical observations recorded."})]})})})]})]})}export{O as default};
