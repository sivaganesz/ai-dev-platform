import{e as c,j as e,B as u,c as b,A as D,q as R,a as z,i as l,G as f,S as G,x as I,d as O,w,r as j}from"./index-CyvJUZqR.js";import{u as v}from"./useQuery-DOA-4dB4.js";import{C as h,a as N,c as g,d as A,b as P}from"./card-9e5eR-TL.js";import{E as U}from"./external-link-CjI-hOui.js";import{R as C}from"./refresh-cw-Bx0G3C4A.js";import{T as _,a as H,b as y,c as m,d as Z,e as x}from"./table-DPilA-Lh.js";import{L as B}from"./lock-DjxgDLYE.js";import{G as q}from"./globe-CET8i7Ac.js";import{H as F}from"./history-C1pYMhQc.js";import{D as M,f as J,a as $,b as Q,c as Y,d as K,e as V}from"./dialog-CXSb95VD.js";import{I as L}from"./input-8HBaoNJU.js";import{P as W}from"./plus-BmaVqT4C.js";import{S as X}from"./separator-DrhA6iK3.js";import{C as ee}from"./circle-check-LM3MRdPF.js";import{S as se}from"./search-CyLX92Us.js";import{L as ae}from"./layout-grid-DXfiUwDM.js";import{L as te}from"./list-_e_2tL9G.js";const re=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],ie=c("git-commit-horizontal",re);const le=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],ne=c("git-pull-request",le);const oe=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],ce=c("github",oe);const de=[["path",{d:"m22 13.29-3.33-10a.42.42 0 0 0-.14-.18.38.38 0 0 0-.22-.11.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18l-2.26 6.67H8.32L6.1 3.26a.42.42 0 0 0-.1-.18.38.38 0 0 0-.26-.08.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18L2 13.29a.74.74 0 0 0 .27.83L12 21l9.69-6.88a.71.71 0 0 0 .31-.83Z",key:"148pdi"}]],me=c("gitlab",de);const xe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],he=c("star",xe),pe=[{id:"INT-PLT-001",platformName:"GitHub",organization:"ai-dev-platform",repositories:[{id:"REP-001",name:"frontend-ui",linkedProject:"PRJ-1001",visibility:"public",stars:124,forks:45,lastUpdate:"2026-02-14T09:30:00Z"},{id:"REP-002",name:"backend-core",linkedProject:"PRJ-1002",visibility:"private",stars:89,forks:12,lastUpdate:"2026-02-14T08:15:00Z"},{id:"REP-003",name:"ml-models",linkedProject:"PRJ-1003",visibility:"private",stars:210,forks:67,lastUpdate:"2026-02-13T18:45:00Z"}],status:"CONNECTED",lastSync:"2026-02-14T10:00:00Z",linkedPipelines:["INT-CICD-001"],avatarUrl:"https://github.com/github.png"},{id:"INT-PLT-002",platformName:"GitLab",organization:"ai-enterprise",repositories:[{id:"REP-004",name:"internal-tools",linkedProject:"PRJ-1004",visibility:"private",stars:12,forks:2,lastUpdate:"2026-02-12T11:00:00Z"}],status:"CONNECTED",lastSync:"2026-02-13T15:20:00Z",linkedPipelines:["INT-CICD-002"],avatarUrl:"https://gitlab.com/assets/gitlab_logo.png"},{id:"INT-PLT-003",platformName:"Azure DevOps",organization:"cloud-ops",repositories:[{id:"REP-005",name:"infrastructure-as-code",linkedProject:"PRJ-1005",visibility:"private",stars:5,forks:1,lastUpdate:"2026-02-10T14:30:00Z"}],status:"DISCONNECTED",lastSync:"2026-02-08T09:00:00Z",linkedPipelines:[],avatarUrl:"https://cdn.vsassets.io/content/icons/favicon.ico"}],ue=[{id:"LOG-001",type:"SYNC",description:"Successfully synced 3 repositories from GitHub",timestamp:"2026-02-14T10:00:00Z",user:"System"},{id:"LOG-002",type:"PR_OPENED",description:"New PR #45 opened in frontend-ui",timestamp:"2026-02-14T09:45:00Z",user:"siva-muthu"},{id:"LOG-003",type:"PUSH",description:"Pushed 2 commits to backend-core:main",timestamp:"2026-02-14T08:30:00Z",user:"ai-agent-v2"},{id:"LOG-004",type:"CONNECTION_UPDATE",description:"GitHub connection re-authorized",timestamp:"2026-02-14T07:00:00Z",user:"admin"}],fe=()=>{const{data:s=[],isLoading:a}=v({queryKey:["platforms"],queryFn:async()=>(await new Promise(i=>setTimeout(i,500)),pe)}),{data:t=[],isLoading:n}=v({queryKey:["platforms-activity"],queryFn:async()=>(await new Promise(i=>setTimeout(i,500)),ue)}),d={totalPlatforms:s.length,connectedPlatforms:s.filter(i=>i.status==="CONNECTED").length,activeRepositories:s.reduce((i,o)=>i+o.repositories.length,0)};return{platforms:s,activityLogs:t,stats:d,isLoading:a||n}};function je({status:s,className:a}){const t={CONNECTED:"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20 border-emerald-500/20",DISCONNECTED:"bg-slate-500/10 text-slate-500 hover:bg-slate-500/20 border-slate-500/20",SYNCING:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 border-blue-500/20 animate-pulse",ERROR:"bg-red-500/10 text-red-500 hover:bg-red-500/20 border-red-500/20"};return e.jsx(u,{variant:"outline",className:b("capitalize font-medium",t[s],a),children:s.toLowerCase()})}function Ne({platform:s,onSelect:a,isSelected:t}){return e.jsxs(h,{className:b("cursor-pointer transition-all hover:border-primary/50",t&&"border-primary ring-1 ring-primary"),onClick:()=>a(s),children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(D,{className:"h-10 w-10 border",children:[e.jsx(R,{src:s.avatarUrl,alt:s.platformName}),e.jsx(z,{children:s.platformName[0]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold leading-none",children:s.platformName}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.organization})]})]}),e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:n=>{n.stopPropagation()},children:e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs(g,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Repositories"}),e.jsx("span",{className:"font-medium",children:s.repositories.length})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Sync"}),e.jsx("span",{className:"text-xs",children:new Date(s.lastSync).toLocaleString()})]})]}),e.jsxs(A,{className:"flex items-center justify-between border-t bg-muted/50 px-6 py-3",children:[e.jsx(je,{status:s.status}),e.jsxs(l,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:n=>n.stopPropagation(),children:[e.jsx(C,{className:"mr-2 h-3 w-3"}),"Sync"]})]})]})}function ge({platform:s}){return s?e.jsxs(h,{className:"h-full flex flex-col",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-primary"}),"Repositories in ",s.platformName]}),e.jsxs(u,{variant:"secondary",children:[s.repositories.length," Total"]})]})}),e.jsx(g,{className:"flex-1 overflow-auto",children:e.jsxs(_,{children:[e.jsx(H,{children:e.jsxs(y,{children:[e.jsx(m,{children:"Repository Name"}),e.jsx(m,{children:"Visibility"}),e.jsx(m,{children:"Linked Project"}),e.jsx(m,{className:"text-right",children:"Stats"})]})}),e.jsx(Z,{children:s.repositories.map(a=>e.jsxs(y,{children:[e.jsx(x,{className:"font-medium",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:["Last updated ",new Date(a.lastUpdate).toLocaleDateString()]})]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-1.5 capitalize text-xs",children:[a.visibility==="private"?e.jsx(B,{className:"h-3 w-3"}):e.jsx(q,{className:"h-3 w-3"}),a.visibility]})}),e.jsx(x,{children:e.jsx(u,{variant:"outline",className:"text-[10px] font-mono",children:a.linkedProject})}),e.jsx(x,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"})," ",a.stars]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-3 w-3"})," ",a.forks]})]})})]},a.id))})]})})]}):e.jsx(h,{className:"h-full flex items-center justify-center text-muted-foreground p-8",children:"Select a platform to view repositories"})}function ve({logs:s}){const a=t=>{switch(t){case"SYNC":return e.jsx(C,{className:"h-4 w-4 text-blue-500"});case"PR_OPENED":return e.jsx(ne,{className:"h-4 w-4 text-emerald-500"});case"PUSH":return e.jsx(ie,{className:"h-4 w-4 text-purple-500"});case"CONNECTION_UPDATE":return e.jsx(I,{className:"h-4 w-4 text-orange-500"})}};return e.jsxs(h,{className:"h-full flex flex-col",children:[e.jsx(N,{children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),"Recent Activity"]})}),e.jsx(g,{className:"flex-1 overflow-hidden p-0",children:e.jsx(G,{className:"h-[400px]",children:e.jsx("div",{className:"p-6 pt-0 space-y-6",children:s.map(t=>e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"bg-muted rounded-full p-2",children:a(t.type)})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:t.user}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(t.timestamp).toLocaleString()})]})]})]},t.id))})})})]})}function ye(){const s=[{name:"GitHub",icon:e.jsx(ce,{className:"h-5 w-5"}),color:"bg-zinc-900"},{name:"GitLab",icon:e.jsx(me,{className:"h-5 w-5"}),color:"bg-orange-600"},{name:"Bitbucket",icon:e.jsx(O,{className:"h-5 w-5"}),color:"bg-blue-600"},{name:"Azure DevOps",icon:e.jsx(w,{className:"h-5 w-5"}),color:"bg-sky-500"}];return e.jsxs(M,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Connect Platform"]})}),e.jsxs($,{className:"sm:max-w-[425px]",children:[e.jsxs(Q,{children:[e.jsx(Y,{children:"Connect Dev Platform"}),e.jsx(K,{children:"Choose a platform to connect your repositories and organizations."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 py-4",children:s.map(a=>e.jsxs(l,{variant:"outline",className:"h-24 flex flex-col gap-2 hover:border-primary hover:bg-primary/5 transition-all",children:[e.jsx("div",{className:`p-2 rounded-lg text-white ${a.color}`,children:a.icon}),e.jsx("span",{className:"text-sm font-semibold",children:a.name})]},a.name))}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Organization / Username"}),e.jsx(L,{placeholder:"e.g. ai-dev-team"})]})}),e.jsx(V,{children:e.jsx(l,{type:"submit",className:"w-full",children:"Authorize & Connect"})})]})]})}class be extends j.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,t){console.error("PlatformsPage Error:",a,t)}render(){return this.state.hasError?e.jsxs("div",{className:"p-8 flex flex-col items-center justify-center min-h-[400px] border-2 border-dashed rounded-xl m-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-destructive mb-4",children:"Something went wrong"}),e.jsx("pre",{className:"p-4 bg-muted rounded-md text-xs overflow-auto max-w-full mb-4",children:this.state.error?.message}),e.jsx(l,{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}function Ze(){return e.jsx(be,{children:e.jsx(we,{})})}function we(){const{platforms:s,activityLogs:a,stats:t,isLoading:n}=fe(),[d,i]=j.useState(null),[o,T]=j.useState(""),k=s.find(r=>r.id===d)||null,S=s.filter(r=>r.platformName.toLowerCase().includes(o.toLowerCase())||r.organization.toLowerCase().includes(o.toLowerCase()));return n?e.jsx("div",{className:"p-8",children:"Loading platforms..."}):e.jsxs("div",{className:"flex flex-col gap-8 p-8",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Platforms Integration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your external code platforms and repository intelligence."})]}),e.jsx(ye,{})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(p,{title:"Total Platforms",value:t.totalPlatforms,icon:e.jsx(w,{className:"h-4 w-4 text-blue-500"})}),e.jsx(p,{title:"Connected",value:t.connectedPlatforms,icon:e.jsx(ee,{className:"h-4 w-4 text-emerald-500"})}),e.jsx(p,{title:"Active Repositories",value:t.activeRepositories,icon:e.jsx(f,{className:"h-4 w-4 text-purple-500"})})]})]}),e.jsx(X,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Configured Platforms"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(se,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search platforms...",className:"pl-8",value:o,onChange:r=>T(r.target.value)})]}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(l,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-none bg-muted",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-none border-l",children:e.jsx(te,{className:"h-4 w-4"})})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:S.map(r=>e.jsx(Ne,{platform:r,isSelected:d===r.id,onSelect:E=>i(E.id)},r.id))}),e.jsx("div",{className:"mt-8",children:e.jsx(ge,{platform:k})})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(ve,{logs:a})})]})]})}function p({title:s,value:a,icon:t}){return e.jsxs("div",{className:"rounded-xl border bg-card p-6 text-card-foreground shadow-sm",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:s}),t]}),e.jsx("div",{className:"text-2xl font-bold",children:a})]})}export{Ze as default};
