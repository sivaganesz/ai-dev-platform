import{u as a}from"./useQuery-DHQUI4b3.js";import{a as o,t as u,r as l}from"./architectureDecisionsData-c6ogkXic.js";import{j as t}from"./index-BCiwssk4.js";import{C as f,a as R,b as y,c as k}from"./card-BFKiiVyG.js";import{R as p,T as x}from"./CategoricalChart-Bh3gHgaB.js";import{R as g,P as j,a as D,b as A,c as S}from"./RadarChart-DGRYN6RY.js";const I=()=>{const{data:e,isLoading:n}=a({queryKey:["architecture-decisions"],queryFn:async()=>o}),{data:r,isLoading:c}=a({queryKey:["tech-stack-decisions"],queryFn:async()=>u}),{data:i,isLoading:d}=a({queryKey:["risk-assessments"],queryFn:async()=>l}),m={totalDecisions:e?.length||0,approved:e?.filter(s=>s.decisionStatus==="APPROVED").length||0,underReview:e?.filter(s=>s.decisionStatus==="UNDER_REVIEW").length||0,highRisk:e?.filter(s=>s.riskLevel==="HIGH"||s.riskLevel==="CRITICAL").length||0},h=[{name:"Proposed",value:e?.filter(s=>s.decisionStatus==="PROPOSED").length||0},{name:"Under Review",value:e?.filter(s=>s.decisionStatus==="UNDER_REVIEW").length||0},{name:"Approved",value:e?.filter(s=>s.decisionStatus==="APPROVED").length||0},{name:"Rejected",value:e?.filter(s=>s.decisionStatus==="REJECTED").length||0}];return{decisions:e,techStack:r,risks:i,metrics:m,statusDistribution:h,impactData:[{name:"System",score:85},{name:"Workflow",score:60},{name:"Deployment",score:45},{name:"Security",score:90}],techStackDistribution:[{name:"Postgres",count:12},{name:"Pinecone",count:4},{name:"Redis",count:8},{name:"Node.js",count:15},{name:"Go",count:5}],isLoading:n||c||d}},K=e=>a({queryKey:["architecture-decision",e],queryFn:async()=>{const n=o.find(i=>i.id===e);if(!n)throw new Error("Architecture decision not found");const r=u.find(i=>i.decisionId===e),c=l.find(i=>i.decisionId===e);return{decision:n,tech:r,risk:c}},enabled:!!e});function T({data:e}){const n=[{subject:"Scalability",A:e?.scalabilityRisk||0,fullMark:100},{subject:"Security",A:e?.securityRisk||0,fullMark:100},{subject:"Performance",A:e?.performanceRisk||0,fullMark:100},{subject:"Cost",A:e?.costRisk||0,fullMark:100}];return t.jsxs(f,{className:"col-span-1",children:[t.jsx(R,{children:t.jsx(y,{children:"Architecture Risk Profile"})}),t.jsx(k,{children:t.jsx("div",{className:"h-[250px] w-full",children:t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(g,{cx:"50%",cy:"50%",outerRadius:"80%",data:n,children:[t.jsx(j,{}),t.jsx(D,{dataKey:"subject",tick:{fontSize:10}}),t.jsx(A,{angle:30,domain:[0,100],tick:!1}),t.jsx(S,{name:"Risk Level",dataKey:"A",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6}),t.jsx(x,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}})]})})})})]})}export{T as R,K as a,I as u};
