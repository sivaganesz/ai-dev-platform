import{j as e,M as v,B as x,i as o}from"./index-BCiwssk4.js";import{u as C}from"./useQuery-DHQUI4b3.js";import{C as n,a as r,b as c,c as d}from"./card-BFKiiVyG.js";import{C as T}from"./circle-check-2Punt13J.js";import{C as D}from"./circle-x-chh1iMyz.js";import{T as y,a as E,b as m,c as a,d as b,e as i}from"./table-BNWkvk0r.js";import{D as S,f as A,a as L,b as R,c as w,e as I}from"./dialog-nwwd_hAG.js";import{I as F}from"./input-D6xA4H8f.js";import{S as u,a as j,b as p,c as f,d as l}from"./select-PQl-LpCO.js";import{P as k}from"./plus-D2eKHfAl.js";import{T as B,a as P,b as N,c as g}from"./tabs-DtsG66Ha.js";import{S as V}from"./shield-alert-lnTdjJbd.js";import"./index-DU2GHXII.js";import"./chevron-down-DHnmizAH.js";const M=[{id:"INT-NTF-001",channel:"Slack",linkedEvents:["Pipeline Failure","Deployment Success","ADR Approval"],recipients:["dev-team","qa-team"],status:"ACTIVE",lastTriggered:"2026-02-14T09:30:00Z"},{id:"INT-NTF-002",channel:"Microsoft Teams",linkedEvents:["Critical Security Alert","Governance Escalation"],recipients:["security-leads","mgmt-ops"],status:"ACTIVE",lastTriggered:"2026-02-14T08:15:00Z"},{id:"INT-NTF-003",channel:"Email",linkedEvents:["Weekly Summary","Billing Alerts"],recipients:["admin@company.com"],status:"ACTIVE",lastTriggered:"2026-02-13T17:00:00Z"}],Z=[{id:"RULE-001",event:"Pipeline Failure",channelId:"INT-NTF-001",channelName:"Slack",status:"ENABLED"},{id:"RULE-002",event:"Critical Security Alert",channelId:"INT-NTF-002",channelName:"Microsoft Teams",status:"ENABLED"},{id:"RULE-003",event:"Deployment Success",channelId:"INT-NTF-001",channelName:"Slack",status:"ENABLED"}],G=[{id:"LOG-001",timestamp:"2026-02-14T09:30:00Z",event:"Pipeline Failure",channel:"Slack",status:"DELIVERED",message:"Pipeline 'auth-service-main' failed at stage 'Test'."},{id:"LOG-002",timestamp:"2026-02-14T09:28:00Z",event:"ADR Approval",channel:"Slack",status:"DELIVERED",message:"ADR-2024-05 approved by @tech-lead."},{id:"LOG-003",timestamp:"2026-02-14T08:15:00Z",event:"Critical Security Alert",channel:"Microsoft Teams",status:"DELIVERED",message:"High severity vulnerability detected in 'node-fetch'."},{id:"LOG-004",timestamp:"2026-02-14T07:45:00Z",event:"Deployment Success",channel:"Slack",status:"FAILED",message:"Connection timeout to Slack API."}],H={activeChannels:3,alertsSentToday:145,failedDeliveries:2};function q(){return C({queryKey:["notifications-data"],queryFn:async()=>(await new Promise(s=>setTimeout(s,500)),{channels:M,rules:Z,logs:G,stats:H})})}function O({channel:s}){return e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground"}),s.channel]})}),e.jsx(x,{variant:s.status==="ACTIVE"?"default":"secondary",children:s.status})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Linked Events"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.linkedEvents.map(t=>e.jsx(x,{variant:"outline",className:"text-[10px]",children:t},t))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Recipients"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.recipients.join(", ")})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Last triggered: ",new Date(s.lastTriggered).toLocaleString()]}),s.status==="ACTIVE"?e.jsx(T,{className:"h-3 w-3 text-green-500"}):e.jsx(D,{className:"h-3 w-3 text-red-500"})]})]})})]})}function _({logs:s}){return e.jsx("div",{className:"rounded-md border",children:e.jsxs(y,{children:[e.jsx(E,{children:e.jsxs(m,{children:[e.jsx(a,{children:"Timestamp"}),e.jsx(a,{children:"Event"}),e.jsx(a,{children:"Channel"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Message"})]})}),e.jsx(b,{children:s.map(t=>e.jsxs(m,{children:[e.jsx(i,{className:"text-xs",children:new Date(t.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),e.jsx(i,{className:"font-medium text-xs",children:t.event}),e.jsx(i,{className:"text-xs",children:t.channel}),e.jsx(i,{children:e.jsx(x,{variant:t.status==="DELIVERED"?"default":t.status==="FAILED"?"destructive":"secondary",className:"text-[10px]",children:t.status})}),e.jsx(i,{className:"text-xs text-muted-foreground max-w-[300px] truncate",children:t.message})]},t.id))})]})})}function U({rules:s}){return e.jsx("div",{className:"rounded-md border",children:e.jsxs(y,{children:[e.jsx(E,{children:e.jsxs(m,{children:[e.jsx(a,{children:"Event"}),e.jsx(a,{children:"Channel Mapping"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Action"})]})}),e.jsx(b,{children:s.map(t=>e.jsxs(m,{children:[e.jsx(i,{className:"font-medium text-xs",children:t.event}),e.jsx(i,{children:e.jsx(x,{variant:"outline",className:"text-[10px]",children:t.channelName})}),e.jsx(i,{children:e.jsx(x,{variant:t.status==="ENABLED"?"default":"secondary",className:"text-[10px]",children:t.status})}),e.jsx(i,{className:"text-right",children:e.jsx(o,{variant:"ghost",size:"sm",className:"h-8 text-xs",children:t.status==="ENABLED"?"Disable":"Enable"})})]},t.id))})]})})}function z(){return e.jsxs(S,{children:[e.jsx(A,{asChild:!0,children:e.jsxs(o,{size:"sm",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Add Rule"]})}),e.jsxs(L,{children:[e.jsx(R,{children:e.jsx(w,{children:"Create Notification Rule"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"event",className:"text-sm font-medium",children:"Event Type"}),e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Select event type"})}),e.jsxs(f,{children:[e.jsx(l,{value:"pipeline_failure",children:"Pipeline Failure"}),e.jsx(l,{value:"deployment_success",children:"Deployment Success"}),e.jsx(l,{value:"adr_approval",children:"ADR Approval"}),e.jsx(l,{value:"security_alert",children:"Security Alert"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"channel",className:"text-sm font-medium",children:"Notification Channel"}),e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Select channel"})}),e.jsxs(f,{children:[e.jsx(l,{value:"slack",children:"Slack"}),e.jsx(l,{value:"teams",children:"Microsoft Teams"}),e.jsx(l,{value:"email",children:"Email"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"recipients",className:"text-sm font-medium",children:"Recipients (comma separated)"}),e.jsx(F,{id:"recipients",placeholder:"e.g. dev-team, ops-manager"})]})]}),e.jsx(I,{children:e.jsx(o,{type:"submit",children:"Create Rule"})})]})]})}function re(){const{data:s,isLoading:t}=q();return t?e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading notifications..."}):e.jsxs("div",{className:"flex-1 space-y-4 p-4 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Notification Systems"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(z,{})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Active Channels"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.stats.activeChannels}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected notification platforms"})]})]}),e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Alerts Sent Today"}),e.jsx(T,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.stats.alertsSentToday}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from yesterday"})]})]}),e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Failed Deliveries"}),e.jsx(V,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.stats.failedDeliveries}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:s?.channels.map(h=>e.jsx(O,{channel:h},h.id))}),e.jsxs(B,{defaultValue:"rules",className:"space-y-4",children:[e.jsxs(P,{children:[e.jsx(N,{value:"rules",children:"Notification Rules"}),e.jsx(N,{value:"logs",children:"Alert Logs"})]}),e.jsx(g,{value:"rules",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(r,{children:e.jsx(c,{className:"text-lg",children:"Event Mapping Rules"})}),e.jsx(d,{children:e.jsx(U,{rules:s?.rules||[]})})]})}),e.jsx(g,{value:"logs",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(r,{children:e.jsx(c,{className:"text-lg",children:"Recent Alert Activity"})}),e.jsx(d,{children:e.jsx(_,{logs:s?.logs||[]})})]})})]})]})}export{re as default};
