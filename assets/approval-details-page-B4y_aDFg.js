import{u as N,p as v,j as e,i,B as t,U as b,n as y,W as p,d as h}from"./index-BCiwssk4.js";import{a as w}from"./use-approvals-data-DJb6LywN.js";import{C as n,a as c,b as o,c as x}from"./card-BFKiiVyG.js";import{s as C}from"./seniorDevelopersData-DFrZ6X3t.js";import{C as I}from"./chevron-left-FFtb6K7-.js";import{C as A}from"./circle-alert-Jnhn6_R7.js";import{M as k}from"./message-square-QDLg7jRk.js";import{C as D}from"./clock-BRr6Aeit.js";import"./useQuery-DHQUI4b3.js";function G(){const{id:f}=N(),u=v(),{data:l,isLoading:g}=w(f||"");if(g)return e.jsx("div",{children:"Loading Approval Context..."});if(!l||!l.request)return e.jsx("div",{children:"Approval request not found"});const{request:s,decisions:m,sla:r}=l,d=a=>C.find(j=>j.id===a)?.name||a;return e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>u(-1),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Approval Request Details"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(n,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{children:s.title}),e.jsxs(t,{variant:s.priority==="HIGH"?"destructive":"secondary",children:[s.priority," PRIORITY"]})]})}),e.jsxs(x,{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Request ID"}),e.jsx("span",{className:"font-mono",children:s.id})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Type"}),e.jsx(t,{variant:"outline",className:"w-fit",children:s.type})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Project"}),e.jsx("span",{children:s.projectId})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Requested By"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.requestedBy})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("h3",{className:"text-sm font-bold mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-primary"}),"Governance Impact"]}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg border",children:e.jsxs("p",{className:"text-sm",children:[s.type==="DEPLOYMENT"&&"This approval gates the release pipeline to the production environment. No deployment can proceed without sign-off.",s.type==="WORKFLOW"&&"Agent execution for this workflow is suspended until technical authority verifies the logic.",s.type==="ARCHITECTURE"&&"System design implementation is blocked. This decision impacts future scalability and tech debt.",s.type==="AGENT_EXECUTION"&&"Autonomous agent is requesting elevated permissions for a sensitive task.",s.type==="HOTFIX"&&"Emergency system modification. Bypass standard CI/CD checks requires immediate architect verification."]})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("h3",{className:"text-sm font-bold mb-4 flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-primary"}),"Linked Context"]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.workflowId&&e.jsxs(t,{variant:"secondary",className:"flex gap-2 p-2",children:[e.jsx(p,{className:"h-3 w-3"}),"Workflow: ",s.workflowId]}),s.agentId&&e.jsxs(t,{variant:"secondary",className:"flex gap-2 p-2",children:[e.jsx(h,{className:"h-3 w-3"}),"Agent: ",s.agentId]}),s.deploymentId&&e.jsxs(t,{variant:"secondary",className:"flex gap-2 p-2",children:[e.jsx(h,{className:"h-3 w-3"}),"Deployment: ",s.deploymentId]})]})]})]})]}),e.jsxs(n,{className:"md:col-span-1",children:[e.jsx(c,{children:e.jsx(o,{children:"Decision Control"})}),e.jsxs(x,{className:"grid gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-bold uppercase",children:"Current Status"}),e.jsx(t,{className:`w-full justify-center text-sm py-1 ${s.status==="APPROVED"?"bg-green-100 text-green-800":s.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})]}),e.jsxs("div",{className:"flex flex-col gap-2 border-t pt-4",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-bold uppercase",children:"Assigned Approver"}),e.jsxs("div",{className:"flex items-center gap-3 p-2 border rounded bg-muted/10",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center font-bold text-primary",children:d(s.assignedTo).substring(0,1)}),e.jsx("span",{className:"text-sm font-medium",children:d(s.assignedTo)})]})]}),r&&e.jsxs("div",{className:`flex flex-col gap-2 border-t pt-4 ${r.breached?"text-red-600":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-bold uppercase",children:"SLA Tracking"}),r.breached&&e.jsx(A,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex flex-col border p-2 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Expected"}),e.jsxs("span",{className:"font-bold",children:[r.expectedHours,"h"]})]}),e.jsxs("div",{className:"flex flex-col border p-2 rounded",children:[e.jsx("span",{className:"text-muted-foreground",children:"Actual"}),e.jsxs("span",{className:"font-bold",children:[r.actualHours,"h"]})]})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2",children:[e.jsx(i,{className:"w-full bg-green-600 hover:bg-green-700",disabled:s.status!=="PENDING",children:"Approve Request"}),e.jsx(i,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50",disabled:s.status!=="PENDING",children:"Reject Request"})]})]})]})]}),e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs(o,{className:"text-lg flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Decision History"]})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:m.length>0?m.map(a=>e.jsxs("div",{className:"p-4 border rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-sm",children:d(a.approverId)}),e.jsx(t,{className:a.decision==="APPROVED"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:a.decision})]}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:new Date(a.timestamp).toLocaleString()})]}),e.jsxs("p",{className:"text-xs text-muted-foreground italic",children:['"',a.comment,'"']})]},a.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground flex flex-col items-center gap-2",children:[e.jsx(D,{className:"h-8 w-8 opacity-20"}),e.jsx("p",{children:"No decisions have been rendered yet."})]})})})]})]})}export{G as default};
