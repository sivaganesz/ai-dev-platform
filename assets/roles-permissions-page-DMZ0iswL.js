import{e as f,j as e,o,B as m,a2 as N,i as l,r as b,x as v}from"./index-CyvJUZqR.js";import{u as w}from"./useQuery-DOA-4dB4.js";import{T as u,a as h,b as d,c as i,d as j,e as n}from"./table-DPilA-Lh.js";import{C as y}from"./chevron-right-5aZEq8ip.js";import{L as g}from"./lock-DjxgDLYE.js";import{C as x,a as D,b as P,c as A}from"./card-9e5eR-TL.js";import{S as p}from"./separator-DrhA6iK3.js";import{I as E}from"./info-C8vcny6T.js";import{L as R}from"./layers-d--2co6E.js";import{D as I,f as C,a as k,b as O,c as T,d as L,e as V}from"./dialog-CXSb95VD.js";import{I as S}from"./input-8HBaoNJU.js";import{P as M}from"./plus-BmaVqT4C.js";const G=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],W=f("lock-open",G),_=[{id:"ROLE-ADMIN",name:"Platform Administrator",description:"Full access to all modules and system configurations.",permissions:["VIEW","EDIT","APPROVE","DEPLOY"],modulesAccess:["Dashboard","Projects","Workflows","Agents","Governance","Sandbox","Integrations","Operations","Administration"]},{id:"ROLE-ARCH",name:"Architecture Reviewer",description:"Can review and approve architectural decisions.",permissions:["ADR_APPROVE","CODE_REVIEW","GOV_ANALYZE","VIEW"],modulesAccess:["Governance","Projects","Dashboard"]},{id:"ROLE-DEVOPS",name:"DevOps Engineer",description:"Manages deployments, pipelines, and cloud resources.",permissions:["DEPLOY","EDIT","VIEW"],modulesAccess:["Operations","Integrations","Sandbox","Dashboard"]},{id:"ROLE-DEV",name:"Developer",description:"Standard developer access to projects and agents.",permissions:["EDIT","VIEW"],modulesAccess:["Projects","Agents","Workflows","Sandbox","Dashboard"]}],B=[{id:"P-001",name:"View Dashboard",module:"Dashboard",action:"VIEW"},{id:"P-002",name:"Edit Projects",module:"Projects",action:"EDIT"},{id:"P-003",name:"Approve ADRs",module:"Governance",action:"APPROVE"},{id:"P-004",name:"Deploy to Production",module:"Operations",action:"DEPLOY"},{id:"P-005",name:"Configure AI Agents",module:"Administration",action:"EDIT"}],F=["Dashboard","Projects","Workflows","Agents","Governance","Sandbox","Integrations","Operations","Administration"],H=["VIEW","EDIT","APPROVE","DEPLOY"];function Y(){return w({queryKey:["roles-permissions-data"],queryFn:async()=>(await new Promise(a=>setTimeout(a,500)),{roles:_,permissions:B,modules:F,actions:H})})}function z({roles:a,onSelectRole:r,selectedRoleId:t}){return e.jsx("div",{className:"rounded-md border bg-card",children:e.jsxs(u,{children:[e.jsx(h,{children:e.jsxs(d,{children:[e.jsx(i,{children:"Role Name"}),e.jsx(i,{children:"Permissions"}),e.jsx(i,{children:"Modules"}),e.jsx(i,{className:"w-[50px]"})]})}),e.jsx(j,{children:a.map(s=>e.jsxs(d,{className:`cursor-pointer group transition-colors ${t===s.id?"bg-muted":"hover:bg-muted/50"}`,onClick:()=>r(s),children:[e.jsx(n,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4 text-primary"}),s.name]})}),e.jsx(n,{children:e.jsxs(m,{variant:"secondary",className:"text-[10px]",children:[s.permissions.length," Actions"]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.modulesAccess.slice(0,3).map(c=>e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-muted border text-muted-foreground",children:c},c)),s.modulesAccess.length>3&&e.jsxs("span",{className:"text-[9px] text-muted-foreground",children:["+",s.modulesAccess.length-3]})]})}),e.jsx(n,{children:e.jsx(y,{className:`h-4 w-4 text-muted-foreground transition-opacity ${t===s.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`})})]},s.id))})]})})}function $({modules:a,actions:r}){const t=(s,c)=>Math.random()>.5;return e.jsxs("div",{className:"rounded-md border bg-card overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 border-b flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-bold flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),"Module-Action Access Matrix"]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})," Granted"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-muted border"})," Inherited"]})]})]}),e.jsxs(u,{children:[e.jsx(h,{className:"bg-muted/50",children:e.jsxs(d,{children:[e.jsx(i,{className:"w-[150px]",children:"Module"}),r.map(s=>e.jsx(i,{className:"text-center text-[10px] font-bold uppercase tracking-wider",children:s},s))]})}),e.jsx(j,{children:a.map(s=>e.jsxs(d,{children:[e.jsx(n,{className:"font-medium text-xs",children:s}),r.map(c=>e.jsx(n,{className:"text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-4 h-4 rounded border transition-colors flex items-center justify-center cursor-pointer ${t()?"bg-primary border-primary text-primary-foreground":"bg-background border-input"}`,children:t()&&e.jsx(W,{className:"h-2.5 w-2.5"})})})},c))]},s))})]})]})}function q({role:a}){return a?e.jsxs(x,{className:"h-full",children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(o,{className:"h-5 w-5 text-primary"}),a.name]}),e.jsx(m,{variant:"outline",className:"font-mono text-[10px]",children:a.id})]})}),e.jsxs(A,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.description})]}),e.jsx(p,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground mb-3 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Module Coverage"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.modulesAccess.map(r=>e.jsx(m,{variant:"secondary",className:"text-[10px]",children:r},r))})]}),e.jsx(p,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground mb-3 flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Global Permissions"]}),e.jsx("div",{className:"space-y-2",children:a.permissions.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-muted/30 border border-muted text-[11px]",children:[e.jsx("span",{className:"font-mono",children:r}),e.jsx("span",{className:"text-green-500 font-bold text-[9px]",children:"GRANTED"})]},r))})]})]})]}):e.jsx(x,{className:"h-full flex items-center justify-center border-dashed",children:e.jsxs("div",{className:"text-center p-6 text-muted-foreground",children:[e.jsx(E,{className:"h-8 w-8 mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Select a role to view detailed permissions"})]})})}function K(){return e.jsxs(I,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(l,{size:"sm",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Create Role"]})}),e.jsxs(k,{className:"sm:max-w-[500px]",children:[e.jsxs(O,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-5 w-5 text-primary"}),"Create Access Role"]}),e.jsx(L,{children:"Define a new role and its primary access scope."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"name",className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Role Name"}),e.jsx(S,{id:"name",placeholder:"e.g. Compliance Auditor"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"description",className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Description"}),e.jsx("textarea",{id:"description",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Describe the purpose of this role..."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Initial Base Role"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",className:"text-[10px] h-8 justify-start",children:"Developer Template"}),e.jsx(l,{variant:"outline",size:"sm",className:"text-[10px] h-8 justify-start",children:"Manager Template"})]})]})]}),e.jsx(V,{children:e.jsx(l,{type:"submit",className:"w-full",children:"Create & Configure Permissions"})})]})]})}function ce(){const{data:a,isLoading:r}=Y(),[t,s]=b.useState(null);return r?e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading access governance..."}):e.jsxs("div",{className:"flex-1 space-y-4 p-4 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Access Governance"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold flex items-center gap-2 uppercase tracking-widest text-muted-foreground",children:[e.jsx(v,{className:"h-4 w-4"}),"Role Management"]}),e.jsx(z,{roles:a?.roles||[],onSelectRole:s,selectedRoleId:t?.id})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold flex items-center gap-2 uppercase tracking-widest text-muted-foreground",children:[e.jsx(g,{className:"h-4 w-4"}),"Permission Resolution"]}),e.jsx($,{modules:a?.modules||[],actions:a?.actions||[]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(q,{role:t})})]})]})}export{ce as default};
