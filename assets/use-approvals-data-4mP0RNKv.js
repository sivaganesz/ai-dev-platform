import{u as s}from"./useQuery-DOA-4dB4.js";const n=[{id:"APP-001",title:"Production Deployment - AI Engine V2",type:"DEPLOYMENT",projectId:"PRJ-1001",deploymentId:"DEP-3001",requestedBy:"Frontend Lead Agent",assignedTo:"SD-001",priority:"HIGH",status:"PENDING",createdAt:"2024-03-22T08:00:00Z"},{id:"APP-002",title:"New Agent Execution - Data Scraper",type:"AGENT_EXECUTION",projectId:"PRJ-1002",agentId:"AG-005",requestedBy:"Marcus Thorne",assignedTo:"SD-003",priority:"MEDIUM",status:"APPROVED",createdAt:"2024-03-21T10:30:00Z",decidedAt:"2024-03-21T14:15:00Z"},{id:"APP-003",title:"Architecture Update: Vector DB Migration",type:"ARCHITECTURE",projectId:"PRJ-1001",requestedBy:"Alex Rivera",assignedTo:"SD-002",priority:"HIGH",status:"ESCALATED",createdAt:"2024-03-20T09:00:00Z"},{id:"APP-004",title:"Emergency Hotfix: Auth Token Leak",type:"HOTFIX",projectId:"PRJ-1003",requestedBy:"Security Agent",assignedTo:"SD-004",priority:"HIGH",status:"APPROVED",createdAt:"2024-03-22T12:00:00Z",decidedAt:"2024-03-22T12:30:00Z"},{id:"APP-005",title:"Workflow Update: CI/CD Pipeline optimization",type:"WORKFLOW",projectId:"PRJ-1002",workflowId:"WF-2001",requestedBy:"DevOps Agent",assignedTo:"SD-004",priority:"LOW",status:"PENDING",createdAt:"2024-03-22T15:00:00Z"},{id:"APP-006",title:"Agent Execution: Batch Image Processing",type:"AGENT_EXECUTION",projectId:"PRJ-1003",agentId:"AG-002",requestedBy:"David Kim",assignedTo:"SD-002",priority:"MEDIUM",status:"REJECTED",createdAt:"2024-03-21T16:00:00Z",decidedAt:"2024-03-21T17:45:00Z"}],p=[{id:"DEC-001",approvalId:"APP-002",approverId:"SD-003",decision:"APPROVED",comment:"Agent parameters verified for safety. Proceed with execution.",timestamp:"2024-03-21T14:15:00Z"},{id:"DEC-002",approvalId:"APP-004",approverId:"SD-004",decision:"APPROVED",comment:"Critical security fix. Approved for immediate deployment.",timestamp:"2024-03-22T12:30:00Z"},{id:"DEC-003",approvalId:"APP-006",approverId:"SD-002",decision:"REJECTED",comment:"Resource usage exceeds current quota. Please optimize the agent code first.",timestamp:"2024-03-21T17:45:00Z"}],d=[{approvalId:"APP-001",expectedHours:4,actualHours:8,breached:!0},{approvalId:"APP-002",expectedHours:24,actualHours:3.75,breached:!1},{approvalId:"APP-003",expectedHours:48,actualHours:52,breached:!0},{approvalId:"APP-004",expectedHours:1,actualHours:.5,breached:!1}],y=()=>{const{data:t,isLoading:r}=s({queryKey:["approval-requests"],queryFn:async()=>n}),{data:o,isLoading:i}=s({queryKey:["approval-decisions"],queryFn:async()=>p}),{data:a,isLoading:l}=s({queryKey:["approval-slas"],queryFn:async()=>d}),u={totalRequests:t?.length||0,pendingApprovals:t?.filter(e=>e.status==="PENDING").length||0,approvedToday:t?.filter(e=>e.status==="APPROVED"&&e.decidedAt?.startsWith("2024-03-22")).length||0,escalations:t?.filter(e=>e.status==="ESCALATED").length||0},c=[{name:"Approved",value:t?.filter(e=>e.status==="APPROVED").length||0},{name:"Pending",value:t?.filter(e=>e.status==="PENDING").length||0},{name:"Rejected",value:t?.filter(e=>e.status==="REJECTED").length||0},{name:"Escalated",value:t?.filter(e=>e.status==="ESCALATED").length||0}],A=[{name:"Workflow",value:t?.filter(e=>e.type==="WORKFLOW").length||0},{name:"Deployment",value:t?.filter(e=>e.type==="DEPLOYMENT").length||0},{name:"Architecture",value:t?.filter(e=>e.type==="ARCHITECTURE").length||0},{name:"Agent",value:t?.filter(e=>e.type==="AGENT_EXECUTION").length||0},{name:"Hotfix",value:t?.filter(e=>e.type==="HOTFIX").length||0}];return{requests:t,decisions:o,slas:a,metrics:u,statusDistribution:c,typeDistribution:A,approverWorkload:[{name:"Alex Rivera",approvals:12},{name:"Sarah Chen",approvals:8},{name:"Marcus Thorne",approvals:15},{name:"Elena Rodriguez",approvals:10},{name:"David Kim",approvals:5}],isLoading:r||i||l}},v=t=>s({queryKey:["approval-request",t],queryFn:async()=>{const r=n.find(a=>a.id===t);if(!r)throw new Error("Approval request not found");const o=p.filter(a=>a.approvalId===t),i=d.find(a=>a.approvalId===t);return{request:r,decisions:o,sla:i}},enabled:!!t});export{v as a,y as u};
