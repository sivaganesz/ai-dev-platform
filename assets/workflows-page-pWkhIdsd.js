import{j as e,d as w,B as x,c as m,G as P,r as i}from"./index-CyvJUZqR.js";import{u as I}from"./useQuery-DOA-4dB4.js";import{w as E}from"./workflowsData-DnIK7nmR.js";import{I as F}from"./input-8HBaoNJU.js";import{S as u,a as h,b as p,c as j,d as o}from"./select-DMU1Mhcj.js";import{p as f}from"./projectsData-w6JgQ9MI.js";import{S as k}from"./search-CyLX92Us.js";import{C as g,a as N,b as v,c as L}from"./card-9e5eR-TL.js";import{P as R}from"./progress-DPoL9SyL.js";import{R as D,T}from"./CategoricalChart-WJAmy3lP.js";import{P as W,a as G}from"./PieChart-CsfmQ4gU.js";import{C as M}from"./tooltipContext-BhFxnOuu.js";import{L as U}from"./Legend-121kkJQm.js";import"./v4-EwEgHOG0.js";import"./index-p66pR0EO.js";import"./chevron-down-DT8imn2m.js";import"./ActiveShapeUtils-tTCqnt4A.js";import"./PolarChart-D353rnxE.js";const V=()=>I({queryKey:["workflows"],queryFn:async()=>new Promise(s=>setTimeout(()=>s(E),300))});function B({onSearchChange:s,onStatusChange:a,onProjectChange:l}){return e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(k,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(F,{placeholder:"Search workflows...",className:"pl-9",onChange:t=>s(t.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(u,{onValueChange:l,defaultValue:"ALL",children:[e.jsx(h,{className:"w-[180px]",children:e.jsx(p,{placeholder:"All Projects"})}),e.jsxs(j,{children:[e.jsx(o,{value:"ALL",children:"All Projects"}),f.map(t=>e.jsx(o,{value:t.id,children:t.name},t.id))]})]}),e.jsxs(u,{onValueChange:a,defaultValue:"ALL",children:[e.jsx(h,{className:"w-[150px]",children:e.jsx(p,{placeholder:"Status"})}),e.jsxs(j,{children:[e.jsx(o,{value:"ALL",children:"All Statuses"}),e.jsx(o,{value:"RUNNING",children:"Running"}),e.jsx(o,{value:"COMPLETED",children:"Completed"}),e.jsx(o,{value:"FAILED",children:"Failed"})]})]})]})]})}function O({workflow:s}){const a=Math.round(s.completedTasks/s.tasksCount*100),l=f.find(r=>r.id===s.projectId)?.name||"Unknown Project",t={RUNNING:"border-blue-500 text-blue-500",COMPLETED:"border-green-500 text-green-500",FAILED:"border-red-500 text-red-500"};return e.jsxs(g,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(N,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-base font-bold truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(w,{className:"h-3 w-3"}),e.jsx("span",{children:l})]})]}),e.jsx(x,{variant:"outline",className:m("text-[10px] uppercase",t[s.status]),children:s.status})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),"Automation Progress"]}),e.jsxs("span",{className:"font-medium",children:[a,"%"]})]}),e.jsx(R,{value:a,className:m("h-1.5",s.status==="FAILED"&&"[&>div]:bg-red-500")})]}),e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:s.assignedTo.map(r=>e.jsxs(x,{variant:"secondary",className:"text-[9px] px-1.5 py-0",children:[r," Agent"]},r))})]})]})}function q({workflows:s}){return s.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:e.jsx("p",{children:"No workflows found matching your filters."})}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map(a=>e.jsx(O,{workflow:a},a.id))})}function H({workflows:s}){const a=s.reduce((t,r)=>(t[r.status]++,t),{RUNNING:0,COMPLETED:0,FAILED:0}),l=[{name:"Running",value:a.RUNNING,color:"#3b82f6"},{name:"Completed",value:a.COMPLETED,color:"#10b981"},{name:"Failed",value:a.FAILED,color:"#ef4444"}];return e.jsxs(g,{children:[e.jsx(N,{children:e.jsx(v,{className:"text-sm font-medium",children:"Workflow Health"})}),e.jsx(L,{children:e.jsx("div",{className:"h-[240px] w-full",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(W,{children:[e.jsx(G,{data:l,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:l.map((t,r)=>e.jsx(M,{fill:t.color},`cell-${r}`))}),e.jsx(T,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx(U,{verticalAlign:"bottom",height:36})]})})})})]})}function ie(){const{data:s,isLoading:a}=V(),[l,t]=i.useState(""),[r,C]=i.useState("ALL"),[d,b]=i.useState("ALL");if(a)return e.jsx("div",{className:"flex h-[400px] items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})});const y=s?.filter(n=>{const c=n.name.toLowerCase().includes(l.toLowerCase()),A=r==="ALL"||n.status===r,S=d==="ALL"||n.projectId===d;return c&&A&&S})||[];return e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflows"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage AI-driven automation pipelines."})]}),e.jsx(B,{onSearchChange:t,onStatusChange:C,onProjectChange:b}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4",children:[e.jsx("div",{className:"md:col-span-1 lg:col-span-1",children:e.jsx(H,{workflows:s||[]})}),e.jsx("div",{className:"md:col-span-2 lg:col-span-3 flex flex-col justify-center px-6",children:e.jsxs("div",{className:"rounded-lg border bg-card p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Pipeline Stats"}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:s?.reduce((n,c)=>n+(c.status==="RUNNING"?c.tasksCount-c.completedTasks:0),0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Failure Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-red-500",children:[s?Math.round(s.filter(n=>n.status==="FAILED").length/s.length*100):0,"%"]})]})]})]})})]}),e.jsx(q,{workflows:y})]})]})}export{ie as default};
