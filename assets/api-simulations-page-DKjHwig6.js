import{e as E,r as c,j as e,B as R,c as b,d as U,T as M,f as C,g as T,i as p,h as I,S as v}from"./index-BCiwssk4.js";import{C as g,a as w,b as y,c as f}from"./card-BFKiiVyG.js";import{C as X}from"./cpu-D_insEa0.js";import{C as G}from"./clock-BRr6Aeit.js";import{C as _}from"./circle-play-DHZwlcRO.js";import{T as k}from"./terminal-CggZm82H.js";import{T as $,a as W,b as D,c as P}from"./tabs-DtsG66Ha.js";import{A as H}from"./arrow-right-left-BgdymnwE.js";import{T as V}from"./trash-2-_zB9Fty9.js";import{D as J,f as Z,a as K,b as Q,c as Y,d as ee,e as se}from"./dialog-nwwd_hAG.js";import{I as A}from"./input-D6xA4H8f.js";import{S as F,a as q,b as B,c as L,d as u}from"./select-PQl-LpCO.js";import{C as z}from"./circle-plus-Bhi4gk7o.js";import{L as te}from"./loader-circle-BPvm6FjY.js";import{Z as ae}from"./zap-Dn1r8E0t.js";import{C as le}from"./circle-check-2Punt13J.js";import{C as re}from"./circle-x-chh1iMyz.js";import{S as ie}from"./search-D8RRm6yT.js";import{F as ne}from"./funnel-Cj1rayWl.js";import"./index-DU2GHXII.js";import"./chevron-down-DHnmizAH.js";const oe=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],de=E("braces",oe);const ce=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],me=E("code-xml",ce);const xe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],pe=E("link-2",xe),O=[{id:"API-001",name:"User Profile Retrieval",linkedSandbox:"SBX-101",linkedBuild:"DB-001",linkedWorkflow:"WF-2001",agentResponsible:"AG-001",method:"GET",endpoint:"/api/v1/users/profile",requestPayload:{userId:"USR-5001"},responsePayload:{id:"USR-5001",name:"John Doe",role:"Developer",status:"ACTIVE"},status:"SUCCESS",logs:["2026-02-13 10:00:00 - [INFO] Initializing request","2026-02-13 10:00:01 - [INFO] Routing through SBX-101 Gateway","2026-02-13 10:00:02 - [INFO] Authorization successful","2026-02-13 10:00:03 - [INFO] Data retrieved from mock database","2026-02-13 10:00:04 - [INFO] Response status: 200 OK"],timestamp:"2026-02-13T10:00:04Z"},{id:"API-002",name:"Project Asset Upload",linkedSandbox:"SBX-102",linkedBuild:"DB-002",linkedWorkflow:"WF-2002",agentResponsible:"AG-002",method:"POST",endpoint:"/api/v1/assets/upload",requestPayload:{fileName:"logo.png",fileSize:"2MB",type:"image/png"},responsePayload:{error:"Storage quota exceeded",code:"STORAGE_FULL"},status:"FAILED",logs:["2026-02-13 11:15:00 - [INFO] Starting file stream upload","2026-02-13 11:15:02 - [INFO] Validating permissions","2026-02-13 11:15:05 - [ERROR] Request failed: Storage quota exceeded","2026-02-13 11:15:06 - [INFO] Response status: 403 Forbidden"],timestamp:"2026-02-13T11:15:06Z"},{id:"API-003",name:"Workflow Step Update",linkedSandbox:"SBX-101",linkedBuild:"DB-001",linkedWorkflow:"WF-2003",agentResponsible:"AG-004",method:"PATCH",endpoint:"/api/v1/workflows/steps/42",requestPayload:{status:"COMPLETED",duration:"120s"},responsePayload:{success:!0,updatedStepId:42},status:"SUCCESS",logs:["2026-02-13 12:30:00 - [INFO] Patch request received","2026-02-13 12:30:01 - [INFO] Updating internal state machine","2026-02-13 12:30:02 - [INFO] Database write complete","2026-02-13 12:30:03 - [INFO] Response status: 200 OK"],timestamp:"2026-02-13T12:30:03Z"}],he=()=>{const[s,a]=c.useState([]),[l,r]=c.useState(null),[m,t]=c.useState(!0);c.useEffect(()=>{const i=setTimeout(()=>{a(O),O.length>0&&r(O[0].id),t(!1)},500);return()=>clearTimeout(i)},[]);const n=s.find(i=>i.id===l)||null,h={total:s.length,successRate:s.length>0?Math.round(s.filter(i=>i.status==="SUCCESS").length/s.length*100):0,failed:s.filter(i=>i.status==="FAILED").length,lastTimestamp:s.length>0?[...s].sort((i,x)=>new Date(x.timestamp).getTime()-new Date(i.timestamp).getTime())[0].timestamp:"N/A"},o=c.useCallback(i=>{a(x=>[i,...x]),r(i.id),setTimeout(()=>{a(x=>x.map(d=>{if(d.id===i.id){const j=Math.random()>.15?"SUCCESS":"FAILED";return{...d,status:j,logs:[...d.logs,`${new Date().toISOString()} - [INFO] Response status: ${j==="SUCCESS"?"200 OK":"500 Internal Error"}`],timestamp:new Date().toISOString()}}return d}))},3e3)},[]),N=c.useCallback(i=>{a(x=>x.map(d=>d.id===i?{...d,status:"IN_PROGRESS",logs:[`${new Date().toISOString()} - [INFO] Simulation re-triggered`],timestamp:new Date().toISOString()}:d)),setTimeout(()=>{a(x=>x.map(d=>{if(d.id===i){const j=Math.random()>.2?"SUCCESS":"FAILED";return{...d,status:j,logs:[...d.logs,`${new Date().toISOString()} - [INFO] Multi-stage validation complete`,`${new Date().toISOString()} - [INFO] Response status: ${j==="SUCCESS"?"200 OK":"400 Bad Request"}`],timestamp:new Date().toISOString()}}return d}))},4e3)},[]);return{simulations:s,selectedSimulation:n,setSelectedId:r,metrics:h,isLoading:m,addSimulation:o,triggerSimulation:N}},ue=({simulation:s,isSelected:a,onSelect:l,onTrigger:r})=>{const m=n=>{switch(n){case"GET":return"text-blue-500 bg-blue-500/10 border-blue-500/20";case"POST":return"text-green-500 bg-green-500/10 border-green-500/20";case"PUT":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"DELETE":return"text-red-500 bg-red-500/10 border-red-200";default:return"text-muted-foreground bg-muted"}},t=n=>{n.stopPropagation(),navigator.clipboard.writeText(s.endpoint),alert("Endpoint copied to clipboard")};return e.jsxs(g,{className:b("cursor-pointer transition-all hover:border-primary/50",a?"border-primary ring-1 ring-primary/20 bg-primary/5":"shadow-sm"),onClick:()=>l(s.id),children:[e.jsx(w,{className:"pb-3 border-b border-dashed",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{className:"text-base font-bold truncate pr-2",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",className:b("text-[10px] font-mono font-bold",m(s.method)),children:s.method}),e.jsx("span",{className:"text-[10px] text-muted-foreground font-mono truncate max-w-[150px]",children:s.endpoint})]})]}),e.jsx(R,{variant:s.status==="SUCCESS"?"default":s.status==="FAILED"?"destructive":"secondary",className:"text-[10px]",children:s.status})]})}),e.jsxs(f,{className:"py-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(U,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate",children:s.linkedSandbox})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground justify-end",children:[e.jsx(X,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"truncate",children:s.agentResponsible})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(G,{className:"w-3 h-3"}),new Date(s.timestamp).toLocaleTimeString()]}),e.jsx("div",{className:"flex gap-1",children:e.jsxs(M,{children:[e.jsxs(C,{children:[e.jsx(T,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-primary",onClick:t,children:e.jsx(pe,{className:"w-3.5 h-3.5"})})}),e.jsx(I,{children:e.jsx("p",{children:"Copy Endpoint"})})]}),e.jsxs(C,{children:[e.jsx(T,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-primary",onClick:n=>{n.stopPropagation(),r(s.id)},disabled:s.status==="IN_PROGRESS",children:e.jsx(_,{className:b("w-3.5 h-3.5",s.status==="IN_PROGRESS"&&"animate-spin")})})}),e.jsx(I,{children:e.jsx("p",{children:"Trigger Simulation"})})]}),e.jsxs(C,{children:[e.jsx(T,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-primary",children:e.jsx(k,{className:"w-3.5 h-3.5"})})}),e.jsx(I,{children:e.jsx("p",{children:"View Logs"})})]})]})})]})]})]})},ge=({simulation:s})=>s?e.jsxs(g,{className:"h-full flex flex-col shadow-md",children:[e.jsx(w,{className:"pb-3 border-b bg-muted/10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-primary"}),e.jsx(y,{className:"text-sm font-bold uppercase tracking-tight",children:"Data Intelligence"})]})}),e.jsx(f,{className:"p-0 flex-1",children:e.jsxs($,{defaultValue:"response",className:"w-full h-full flex flex-col",children:[e.jsxs(W,{className:"w-full justify-start px-4 h-10 bg-muted/5 border-b rounded-none",children:[e.jsx(D,{value:"request",className:"text-[10px] uppercase font-bold tracking-wider h-8",children:"Request Payload"}),e.jsx(D,{value:"response",className:"text-[10px] uppercase font-bold tracking-wider h-8",children:"Response Data"})]}),e.jsxs("div",{className:"flex-1 min-h-0 bg-zinc-950",children:[e.jsx(P,{value:"request",className:"m-0 h-full",children:e.jsx(v,{className:"h-[250px] w-full p-4",children:e.jsx("pre",{className:"text-[11px] font-mono text-zinc-300 leading-relaxed",children:JSON.stringify(s.requestPayload,null,2)})})}),e.jsx(P,{value:"response",className:"m-0 h-full",children:e.jsx(v,{className:"h-[250px] w-full p-4",children:e.jsx("pre",{className:"text-[11px] font-mono text-green-400 leading-relaxed",children:JSON.stringify(s.responsePayload,null,2)})})})]})]})})]}):e.jsx(g,{className:"h-full border-dashed border-2",children:e.jsxs(f,{className:"flex flex-col items-center justify-center h-[300px] text-muted-foreground",children:[e.jsx(de,{className:"w-12 h-12 opacity-10 mb-4"}),e.jsx("p",{className:"font-medium",children:"Select a request to view payloads"}),e.jsx("p",{className:"text-xs opacity-60",children:"JSON data will be formatted here"})]})}),fe=({simulation:s})=>{const a=c.useRef(null);return c.useEffect(()=>{if(a.current){const l=a.current.querySelector("[data-radix-scroll-area-viewport]");l&&(l.scrollTop=l.scrollHeight)}},[s?.logs]),s?e.jsxs(g,{className:"h-full flex flex-col shadow-md border-primary/10",children:[e.jsxs(w,{className:"pb-3 border-b bg-muted/10 flex flex-row items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-primary"}),e.jsx(y,{className:"text-sm font-bold uppercase tracking-tight",children:"Pipeline Logs"})]}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-7 w-7 text-red-400 hover:bg-red-400/10",children:e.jsx(V,{className:"w-3.5 h-3.5"})})]}),e.jsx(f,{className:"p-0 flex-1 bg-zinc-950",children:e.jsx(v,{className:"h-[250px] w-full p-4",ref:a,children:e.jsxs("div",{className:"font-mono text-[11px] leading-relaxed space-y-1",children:[s.logs.map((l,r)=>e.jsxs("div",{className:"flex gap-3 group px-2 -mx-2 rounded hover:bg-white/5",children:[e.jsx("span",{className:"text-zinc-600 select-none min-w-[20px] text-right",children:r+1}),e.jsx("span",{className:b("whitespace-pre-wrap flex-1",l.includes("[ERROR]")?"text-red-400":l.includes("[INFO]")?"text-zinc-400":"text-zinc-300"),children:l})]},r)),s.status==="IN_PROGRESS"&&e.jsxs("div",{className:"flex gap-3 animate-pulse px-2 -mx-2",children:[e.jsx("span",{className:"text-zinc-600 min-w-[20px] text-right",children:s.logs.length+1}),e.jsx("span",{className:"text-primary italic font-bold",children:"Stream: Executing request..."})]})]})})})]}):e.jsx(g,{className:"h-full border-dashed border-2",children:e.jsxs(f,{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground",children:[e.jsx(k,{className:"w-10 h-10 opacity-10 mb-4"}),e.jsx("p",{className:"text-sm",children:"Select a request to view logs"})]})})},je=({onSubmit:s})=>{const[a,l]=c.useState(!1),[r,m]=c.useState(!1),[t,n]=c.useState({name:"",sandbox:"SBX-101",agent:"AG-001",method:"GET",endpoint:"/api/v1/",payload:'{ "id": 1 }'}),h=o=>{o.preventDefault(),m(!0),setTimeout(()=>{let N={};try{N=JSON.parse(t.payload)}catch{}const i={id:`API-${Math.floor(Math.random()*900)+100}`,name:t.name,linkedSandbox:t.sandbox,linkedBuild:"DB-001",linkedWorkflow:"WF-2001",agentResponsible:t.agent,method:t.method,endpoint:t.endpoint,requestPayload:N,responsePayload:{success:!0,timestamp:new Date().toISOString()},status:"IN_PROGRESS",logs:[`${new Date().toISOString()} - [INFO] Request pipeline initialized`],timestamp:new Date().toISOString()};s(i),m(!1),l(!1),n({name:"",sandbox:"SBX-101",agent:"AG-001",method:"GET",endpoint:"/api/v1/",payload:'{ "id": 1 }'})},1e3)};return e.jsxs(J,{open:a,onOpenChange:l,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(p,{className:"gap-2 shadow-lg",children:[e.jsx(z,{className:"w-4 h-4"}),"New Simulation"]})}),e.jsx(K,{className:"sm:max-w-[500px]",children:e.jsxs("form",{onSubmit:h,children:[e.jsxs(Q,{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-primary"}),"Initialize API Simulation"]}),e.jsx(ee,{children:"Define a mock request to test your agents and sandboxes."})]}),e.jsxs("div",{className:"grid gap-4 py-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Request Name"}),e.jsx(A,{required:!0,placeholder:"e.g. Fetch Auth Token",value:t.name,onChange:o=>n({...t,name:o.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Method"}),e.jsxs(F,{value:t.method,onValueChange:o=>n({...t,method:o}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(L,{children:[e.jsx(u,{value:"GET",children:"GET"}),e.jsx(u,{value:"POST",children:"POST"}),e.jsx(u,{value:"PUT",children:"PUT"}),e.jsx(u,{value:"PATCH",children:"PATCH"}),e.jsx(u,{value:"DELETE",children:"DELETE"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Sandbox"}),e.jsxs(F,{value:t.sandbox,onValueChange:o=>n({...t,sandbox:o}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(L,{children:[e.jsx(u,{value:"SBX-101",children:"SBX-101 (Alpha)"}),e.jsx(u,{value:"SBX-102",children:"SBX-102 (Beta)"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Endpoint"}),e.jsx(A,{required:!0,placeholder:"/api/v1/...",value:t.endpoint,onChange:o=>n({...t,endpoint:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Request Payload (JSON)"}),e.jsx("textarea",{className:"w-full h-24 p-3 bg-muted/50 rounded-md border text-xs font-mono focus:outline-none focus:ring-2 focus:ring-primary",value:t.payload,onChange:o=>n({...t,payload:o.target.value})})]})]}),e.jsxs(se,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(p,{type:"submit",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 mr-2 animate-spin"})," Deploying..."]}):"Start Simulation"})]})]})})]})},S=({title:s,value:a,icon:l,description:r,colorClass:m="text-primary"})=>e.jsxs(g,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:s}),e.jsx(l,{className:`h-4 w-4 ${m}`})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),r&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:r})]})]});function Ge(){const{simulations:s,selectedSimulation:a,setSelectedId:l,metrics:r,isLoading:m,addSimulation:t,triggerSimulation:n}=he();return m?e.jsx("div",{className:"flex h-[400px] items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-8 h-[calc(100vh-4rem)] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0 border-b pb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight flex items-center gap-2",children:[e.jsx(me,{className:"w-8 h-8 text-primary"}),"API Simulations"]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm font-medium tracking-tight",children:"Test and validate autonomous agent communication pipelines."})]}),e.jsx(je,{onSubmit:t})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 shrink-0",children:[e.jsx(S,{title:"Total Simulations",value:r.total,icon:ae,colorClass:"text-blue-500"}),e.jsx(S,{title:"Success Rate",value:`${r.successRate}%`,icon:le,colorClass:"text-green-500",description:"Avg. pipeline health"}),e.jsx(S,{title:"Failed Requests",value:r.failed,icon:re,colorClass:"text-red-500",description:"Needs attention"}),e.jsx(S,{title:"Last Execution",value:new Date(r.lastTimestamp).toLocaleTimeString(),icon:G,colorClass:"text-purple-500",description:"Real-time heartbeat"})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[e.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["Active Endpoints",e.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-primary/10 text-primary rounded-full",children:s.length})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",className:"h-8 gap-2 text-xs",children:[e.jsx(ie,{className:"w-3.5 h-3.5"}),"Search"]}),e.jsxs(p,{variant:"outline",size:"sm",className:"h-8 gap-2 text-xs",children:[e.jsx(ne,{className:"w-3.5 h-3.5"}),"Filter"]})]})]}),e.jsx(v,{className:"flex-1 pr-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-6",children:s.map(h=>e.jsx(ue,{simulation:h,isSelected:a?.id===h.id,onSelect:l,onTrigger:n},h.id))})})]}),e.jsxs("div",{className:"lg:col-span-4 h-full flex flex-col gap-6 overflow-hidden",children:[e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(ge,{simulation:a})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(fe,{simulation:a})})]})]})})]})}export{Ge as default};
