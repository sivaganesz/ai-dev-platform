import{j as e,R as j,B as d,c as D,y as w,D as C,E as T,H as E,I as S,U as A,n as I,r as P}from"./index-BCiwssk4.js";import{u as R}from"./useQuery-DHQUI4b3.js";import{C as n,a as r,b as i,c}from"./card-BFKiiVyG.js";import{C as L}from"./clock-BRr6Aeit.js";import{D as k}from"./database-slLrYocH.js";import{T as B,a as O,b as v,c as x,d as H,e as p}from"./table-BNWkvk0r.js";import{C as h}from"./circle-check-2Punt13J.js";import{T as U}from"./triangle-alert-DWyxYOT3.js";import{S as u}from"./separator-Cyuoti2e.js";import{C as N}from"./circle-Ki2SbgTu.js";import{R as F,T as G}from"./CategoricalChart-Bh3gHgaB.js";import{A as V,a as M}from"./AreaChart-DkaUR0_l.js";import{C as Z}from"./CartesianGrid-baeG5ejF.js";import{X as z,Y}from"./CartesianChart-CtP7DrOF.js";import{T as K}from"./tag-BXva2vpe.js";import{G as J}from"./globe-CEp9j2tq.js";import{T as q,a as _,b as y,c as g}from"./tabs-DtsG66Ha.js";import{C as W}from"./circle-alert-Jnhn6_R7.js";import{R as X}from"./rotate-ccw-O62MxV-z.js";import"./ActivePoints-DrrfsG2v.js";import"./getRadiusAndStrokeWidthFromDot-DFUTjtTE.js";import"./graphicalItemSelectors-DMoC6oeC.js";import"./index-DU2GHXII.js";const Q=[{id:"DEP-001",projectId:"PRJ-1001",projectName:"Auth Service",pipelineId:"INT-CICD-001",buildId:"DB-001",environment:"Production",cloudProvider:"AWS",deployedBy:"DevOps Agent",version:"v2.3.1",status:"SUCCESS",deployedAt:"2026-02-14T08:30:00Z",rollbackAvailable:!0,metrics:{cpuUsage:45,memoryUsage:62,latency:120}},{id:"DEP-002",projectId:"PRJ-1002",projectName:"Data Pipeline",pipelineId:"INT-CICD-002",buildId:"DB-002",environment:"Staging",cloudProvider:"Azure",deployedBy:"DevOps Agent",version:"v1.4.0",status:"FAILED",deployedAt:"2026-02-14T09:15:00Z",rollbackAvailable:!1,metrics:{cpuUsage:0,memoryUsage:0,latency:0}},{id:"DEP-003",projectId:"PRJ-1003",projectName:"Frontend Dashboard",pipelineId:"INT-CICD-003",buildId:"DB-003",environment:"Sandbox",cloudProvider:"GCP",deployedBy:"Frontend Agent",version:"v0.9.5-beta",status:"IN_PROGRESS",deployedAt:"2026-02-14T10:00:00Z",rollbackAvailable:!1,metrics:{cpuUsage:20,memoryUsage:35,latency:85}},{id:"DEP-004",projectId:"PRJ-1001",projectName:"Auth Service",pipelineId:"INT-CICD-001",buildId:"DB-004",environment:"Production",cloudProvider:"AWS",deployedBy:"DevOps Agent",version:"v2.3.0",status:"ROLLBACK",deployedAt:"2026-02-14T07:00:00Z",rollbackAvailable:!0,metrics:{cpuUsage:42,memoryUsage:58,latency:115}}],$=[{id:"EVT-001",deploymentId:"DEP-001",stage:"Build",status:"COMPLETED",timestamp:"2026-02-14T08:10:00Z"},{id:"EVT-002",deploymentId:"DEP-001",stage:"Deploy",status:"COMPLETED",timestamp:"2026-02-14T08:20:00Z"},{id:"EVT-003",deploymentId:"DEP-001",stage:"Verify",status:"COMPLETED",timestamp:"2026-02-14T08:25:00Z"},{id:"EVT-004",deploymentId:"DEP-001",stage:"Release",status:"COMPLETED",timestamp:"2026-02-14T08:30:00Z"}],ee={totalDeployments:145,successRate:94.2,failedReleases:6,rollbacks:2},se=[{environment:"Production",status:"HEALTHY",activeDeployments:12,uptime:"99.99%"},{environment:"Staging",status:"DEGRADED",activeDeployments:8,uptime:"98.5%"},{environment:"Sandbox",status:"HEALTHY",activeDeployments:24,uptime:"99.2%"}];function te(){return R({queryKey:["deployments-data"],queryFn:async()=>(await new Promise(s=>setTimeout(s,500)),{deployments:Q,events:$,stats:ee,environmentHealth:se})})}function ae({deployment:s,onClick:t}){const l=a=>{switch(a){case"SUCCESS":return"default";case"FAILED":return"destructive";case"IN_PROGRESS":return"secondary";case"ROLLBACK":return"outline";default:return"secondary"}};return e.jsxs(n,{className:"cursor-pointer hover:border-primary transition-colors",onClick:()=>t(s),children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),s.projectName]})}),e.jsx(d,{variant:l(s.status),children:s.status})]}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Version"}),e.jsx("span",{className:"text-xs font-mono font-bold",children:s.version})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Environment"}),e.jsx(d,{variant:"outline",className:"text-[10px]",children:s.environment})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(L,{className:"h-3 w-3"}),new Date(s.deployedAt).toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[e.jsx(k,{className:"h-3 w-3"}),s.cloudProvider]})]})]})})]})}function le({data:s}){return e.jsx("div",{className:"rounded-md border",children:e.jsxs(B,{children:[e.jsx(O,{children:e.jsxs(v,{children:[e.jsx(x,{children:"Environment"}),e.jsx(x,{children:"Health Status"}),e.jsx(x,{children:"Active Deployments"}),e.jsx(x,{children:"Uptime"})]})}),e.jsx(H,{children:s.map(t=>e.jsxs(v,{children:[e.jsx(p,{className:"font-medium",children:t.environment}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="HEALTHY"?e.jsx(h,{className:"h-4 w-4 text-green-500"}):e.jsx(U,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:t.status})]})}),e.jsx(p,{className:"text-center",children:t.activeDeployments}),e.jsx(p,{children:e.jsx(d,{variant:"outline",className:"font-mono",children:t.uptime})})]},t.environment))})]})})}function ne({events:s}){const t=["Build","Deploy","Verify","Release"];return e.jsxs("div",{className:"relative flex justify-between w-full py-8",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-muted -translate-y-1/2 z-0"}),t.map(l=>{const a=s.find(b=>b.stage===l),m=a?.status==="COMPLETED",o=a?.status==="IN_PROGRESS",f=a?.status==="FAILED";return e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 bg-background px-2",children:[e.jsx("div",{className:D("p-1 rounded-full",m?"text-green-500":f?"text-red-500":o?"text-blue-500 animate-pulse":"text-muted-foreground"),children:m?e.jsx(h,{className:"h-6 w-6"}):f?e.jsx(N,{className:"h-6 w-6 fill-red-500"}):e.jsx(N,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs font-semibold",children:l}),a&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},l)})]})}const re=[{time:"08:00",cpu:35,memory:55,latency:110},{time:"08:15",cpu:42,memory:58,latency:115},{time:"08:30",cpu:45,memory:62,latency:120},{time:"08:45",cpu:48,memory:65,latency:125},{time:"09:00",cpu:40,memory:60,latency:118},{time:"09:15",cpu:38,memory:58,latency:112}];function ie(){return e.jsxs(n,{className:"col-span-1",children:[e.jsx(r,{children:e.jsx(i,{className:"text-sm font-medium",children:"Performance Metrics (Last 2h)"})}),e.jsx(c,{children:e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(V,{data:re,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCpu",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),e.jsx(Z,{strokeDasharray:"3 3",vertical:!1}),e.jsx(z,{dataKey:"time",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(Y,{fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:s=>`${s}%`}),e.jsx(G,{contentStyle:{fontSize:"10px"},itemStyle:{fontSize:"10px"}}),e.jsx(M,{type:"monotone",dataKey:"cpu",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorCpu)"})]})})})})]})}function ce({deployment:s,events:t,isOpen:l,onClose:a}){return s?e.jsx(w,{open:l,onOpenChange:a,children:e.jsxs(C,{className:"sm:max-w-xl overflow-y-auto",children:[e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(E,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-primary"}),s.projectName]}),e.jsx(d,{children:s.status})]}),e.jsxs(S,{children:["Deployment details for ",s.version," in ",s.environment]})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"})," Version"]}),e.jsx("p",{className:"text-sm font-mono font-bold",children:s.version})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"})," Environment"]}),e.jsx("p",{className:"text-sm font-semibold",children:s.environment})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"})," Deployed By"]}),e.jsx("p",{className:"text-sm font-semibold",children:s.deployedBy})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"})," Rollback Available"]}),e.jsx(d,{variant:s.rollbackAvailable?"default":"secondary",children:s.rollbackAvailable?"Yes":"No"})]})]}),e.jsx(u,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Deployment Lifecycle"}),e.jsx(ne,{events:t})]}),e.jsx(u,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Environment Metrics"}),e.jsx(ie,{})]}),e.jsx(u,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Infrastructure Detail"}),e.jsxs("div",{className:"bg-muted p-3 rounded-md space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Provider"}),e.jsx("span",{className:"font-medium",children:s.cloudProvider})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pipeline ID"}),e.jsx("span",{className:"font-mono",children:s.pipelineId})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Build ID"}),e.jsx("span",{className:"font-mono",children:s.buildId})]})]})]})]})]})}):null}function Re(){const{data:s,isLoading:t}=te(),[l,a]=P.useState(null);if(t)return e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading deployments..."});const m=s?.events.filter(o=>o.deploymentId===l?.id)||[];return e.jsxs("div",{className:"flex-1 space-y-4 p-4 pt-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Deployments"})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Deployments"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.stats.totalDeployments}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time releases"})]})]}),e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Success Rate"}),e.jsx(h,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s?.stats.successRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+0.4% from last month"})]})]}),e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Failed Releases"}),e.jsx(W,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.stats.failedReleases}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires investigation"})]})]}),e.jsxs(n,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Rollbacks"}),e.jsx(X,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.stats.rollbacks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent version reverts"})]})]})]}),e.jsxs(q,{defaultValue:"overview",className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(_,{children:[e.jsx(y,{value:"overview",children:"Recent Deployments"}),e.jsx(y,{value:"environments",children:"Environments"})]})}),e.jsx(g,{value:"overview",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:s?.deployments.map(o=>e.jsx(ae,{deployment:o,onClick:a},o.id))})}),e.jsx(g,{value:"environments",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(r,{children:e.jsx(i,{children:"Environment Health"})}),e.jsx(c,{children:e.jsx(le,{data:s?.environmentHealth||[]})})]})})]}),e.jsx(ce,{deployment:l,events:m,isOpen:!!l,onClose:()=>a(null)})]})}export{Re as default};
