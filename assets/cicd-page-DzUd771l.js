import{j as e,G as w,B as x,c as u,C as E,i as n,S as P,r as f,R as j,l as R}from"./index-BCiwssk4.js";import{u as y}from"./useQuery-DHQUI4b3.js";import{C as d,a as p,c as h,d as I,b as g}from"./card-BFKiiVyG.js";import{P as D}from"./progress-Dcq2j96H.js";import{C as L}from"./clock-BRr6Aeit.js";import{R as T}from"./rotate-ccw-O62MxV-z.js";import{P as B}from"./play-BjBsGe-4.js";import{C as k}from"./circle-Ki2SbgTu.js";import{L as U}from"./loader-circle-BPvm6FjY.js";import{C as N}from"./circle-x-chh1iMyz.js";import{C as S}from"./circle-check-2Punt13J.js";import{T as F}from"./terminal-CggZm82H.js";import{D as G}from"./download-DWz5rC0s.js";import{I as A}from"./input-D6xA4H8f.js";import{S as O}from"./separator-Cyuoti2e.js";import{R as _}from"./refresh-cw-D5KsgFTF.js";import{F as z}from"./funnel-Cj1rayWl.js";import{S as M}from"./search-D8RRm6yT.js";const Q=[{id:"INT-CICD-001",name:"Frontend Build Pipeline",platform:"INT-PLT-001",repository:"REP-001",linkedBuild:"DB-001",stages:[{id:"S1",name:"Install Dependencies",status:"SUCCESS",duration:"1m 20s"},{id:"S2",name:"Run Tests",status:"SUCCESS",duration:"2m 45s"},{id:"S3",name:"Build",status:"SUCCESS",duration:"3m 10s"},{id:"S4",name:"Deploy",status:"SUCCESS",duration:"45s"}],successRate:87,lastExecution:"2026-02-13T18:00:00Z",status:"SUCCESS",logs:["[18:00:01] Starting pipeline execution...","[18:01:21] Dependencies installed successfully.","[18:04:06] All tests passed (452 tests).","[18:07:16] Build completed: dist/ folder generated.","[18:08:01] Deployment successful to staging environment."]},{id:"INT-CICD-002",name:"Backend Core Pipeline",platform:"INT-PLT-001",repository:"REP-002",linkedBuild:"DB-002",stages:[{id:"S1",name:"Linting",status:"SUCCESS",duration:"30s"},{id:"S2",name:"Unit Tests",status:"SUCCESS",duration:"5m 12s"},{id:"S3",name:"Integration Tests",status:"FAILED",duration:"10m 05s"},{id:"S4",name:"Dockerize",status:"PENDING"}],successRate:65,lastExecution:"2026-02-14T09:30:00Z",status:"FAILED",logs:["[09:30:05] Starting backend pipeline...","[09:30:35] Linting passed.","[09:35:47] Unit tests passed.","[09:45:52] ERROR: Integration tests failed at stage 'Database Connection'.","[09:45:53] Pipeline aborted."]},{id:"INT-CICD-003",name:"ML Models Training",platform:"INT-PLT-001",repository:"REP-003",linkedBuild:"DB-003",stages:[{id:"S1",name:"Data Validation",status:"SUCCESS",duration:"15m"},{id:"S2",name:"Model Training",status:"IN_PROGRESS",duration:"4h 20m"},{id:"S3",name:"Evaluation",status:"PENDING"},{id:"S4",name:"Model Export",status:"PENDING"}],successRate:92,lastExecution:"2026-02-14T11:00:00Z",status:"IN_PROGRESS",logs:["[11:00:10] Training session started.","[11:15:10] Data validation complete.","[11:15:11] Epoch 1/50 started...","[15:35:20] Epoch 42/50 in progress: Loss 0.024"]}],Z=()=>{const{data:s=[],isLoading:a}=y({queryKey:["cicd-pipelines"],queryFn:async()=>(await new Promise(l=>setTimeout(l,500)),Q)}),t={totalPipelines:s.length,successRate:Math.round(s.reduce((l,r)=>l+r.successRate,0)/s.length)||0,failedBuilds:s.filter(l=>l.status==="FAILED").length,inProgress:s.filter(l=>l.status==="IN_PROGRESS").length};return{pipelines:s,stats:t,isLoading:a}};function q({pipeline:s,onSelect:a,isSelected:t}){const l={SUCCESS:"text-emerald-500 bg-emerald-500/10 border-emerald-500/20",FAILED:"text-red-500 bg-red-500/10 border-red-500/20",IN_PROGRESS:"text-blue-500 bg-blue-500/10 border-blue-500/20 animate-pulse"};return e.jsxs(d,{className:u("cursor-pointer transition-all hover:border-primary/50",t&&"border-primary ring-1 ring-primary"),onClick:()=>a(s),children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold leading-none",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(w,{className:"h-3 w-3"}),s.repository]})]}),e.jsx(x,{variant:"outline",className:u("capitalize",l[s.status]),children:s.status.replace("_"," ").toLowerCase()})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," Success Rate"]}),e.jsxs("span",{className:"font-medium",children:[s.successRate,"%"]})]}),e.jsx(D,{value:s.successRate,className:"h-1.5"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase",children:"Last Execution"}),e.jsxs("span",{className:"text-xs flex items-center gap-1 font-medium",children:[e.jsx(L,{className:"h-3 w-3"}),new Date(s.lastExecution).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase",children:"Stages"}),e.jsxs("span",{className:"text-xs font-medium",children:[s.stages.length," Stages"]})]})]})]}),e.jsxs(I,{className:"flex items-center gap-2 border-t bg-muted/50 px-6 py-3",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"h-8 flex-1 text-xs",onClick:r=>r.stopPropagation(),children:[e.jsx(T,{className:"mr-2 h-3 w-3"}),"Rerun"]}),e.jsxs(n,{size:"sm",className:"h-8 flex-1 text-xs",onClick:r=>r.stopPropagation(),children:[e.jsx(B,{className:"mr-2 h-3 w-3"}),"Trigger"]})]})]})}function H({pipeline:s}){if(!s)return e.jsx(d,{className:"h-full flex items-center justify-center text-muted-foreground p-8",children:"Select a pipeline to view execution details"});const a=t=>{switch(t){case"SUCCESS":return e.jsx(S,{className:"h-5 w-5 text-emerald-500"});case"FAILED":return e.jsx(N,{className:"h-5 w-5 text-red-500"});case"IN_PROGRESS":return e.jsx(U,{className:"h-5 w-5 text-blue-500 animate-spin"});default:return e.jsx(k,{className:"h-5 w-5 text-muted-foreground"})}};return e.jsxs(d,{children:[e.jsx(p,{children:e.jsxs(g,{className:"text-lg",children:["Execution Timeline: ",s.name]})}),e.jsx(h,{children:e.jsx("div",{className:"relative space-y-8 before:absolute before:inset-0 before:ml-2.5 before:h-full before:w-0.5 before:-translate-x-px before:bg-muted",children:s.stages.map(t=>e.jsxs("div",{className:"relative flex items-start gap-4 pl-8",children:[e.jsx("div",{className:"absolute left-0 flex h-5 w-5 items-center justify-center rounded-full bg-background ring-2 ring-muted",children:a(t.status)}),e.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",children:t.name}),e.jsx(x,{variant:"outline",className:"text-[10px] font-mono",children:t.duration||"--"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{variant:"outline",className:u("text-[10px] capitalize",t.status==="SUCCESS"&&"border-emerald-500/20 text-emerald-500",t.status==="FAILED"&&"border-red-500/20 text-red-500",t.status==="IN_PROGRESS"&&"border-blue-500/20 text-blue-500"),children:t.status.replace("_"," ").toLowerCase()})})]})]},t.id))})})]})}function K({pipeline:s}){return s?e.jsxs(d,{className:"h-full flex flex-col",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(g,{className:"text-lg flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),"Execution Logs"]}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(G,{className:"h-4 w-4"})})]}),e.jsx(h,{className:"flex-1 overflow-hidden p-0",children:e.jsx(P,{className:"h-[300px] w-full bg-slate-950 p-4",children:e.jsxs("div",{className:"font-mono text-xs text-slate-300 space-y-1",children:[s.logs.map((a,t)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-slate-600 select-none w-4",children:t+1}),e.jsx("span",{className:a.includes("ERROR")?"text-red-400":"",children:a})]},t)),s.status==="IN_PROGRESS"&&e.jsxs("div",{className:"flex gap-4 animate-pulse",children:[e.jsx("span",{className:"text-slate-600 select-none w-4",children:s.logs.length+1}),e.jsx("span",{className:"text-blue-400",children:"Loading next events..."})]})]})})})]}):null}function xe(){const{pipelines:s,stats:a,isLoading:t}=Z(),[l,r]=f.useState(null),[o,C]=f.useState(""),m=s.find(i=>i.id===l)||null,v=s.filter(i=>i.name.toLowerCase().includes(o.toLowerCase())||i.repository.toLowerCase().includes(o.toLowerCase()));return t?e.jsx("div",{className:"p-8",children:"Loading pipelines..."}):e.jsxs("div",{className:"flex flex-col gap-8 p-8",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"CI/CD Pipelines"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage automated build, test, and deployment workflows."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Sync Status"]}),e.jsxs(n,{children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"New Pipeline"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(c,{title:"Total Pipelines",value:a.totalPipelines,icon:e.jsx(j,{className:"h-4 w-4 text-blue-500"})}),e.jsx(c,{title:"Avg Success Rate",value:`${a.successRate}%`,icon:e.jsx(S,{className:"h-4 w-4 text-emerald-500"})}),e.jsx(c,{title:"Failed Builds",value:a.failedBuilds,icon:e.jsx(N,{className:"h-4 w-4 text-red-500"})}),e.jsx(c,{title:"Active Runs",value:a.inProgress,icon:e.jsx(R,{className:"h-4 w-4 text-orange-500 animate-pulse"})})]})]}),e.jsx(O,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Pipelines"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(z,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search pipelines...",className:"pl-8",value:o,onChange:i=>C(i.target.value)})]}),e.jsx("div",{className:"grid gap-4",children:v.map(i=>e.jsx(q,{pipeline:i,isSelected:l===i.id,onSelect:b=>r(b.id)},i.id))})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(H,{pipeline:m}),m&&e.jsx(K,{pipeline:m})]})]})]})}function c({title:s,value:a,icon:t}){return e.jsxs("div",{className:"rounded-xl border bg-card p-6 text-card-foreground shadow-sm",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:s}),t]}),e.jsx("div",{className:"text-2xl font-bold",children:a})]})}export{xe as default};
