import{e as Ee,r as l,t as Ie,s as ie,j as t,p as Se,B as _}from"./index-CyvJUZqR.js";import{u as Ne}from"./use-code-reviews-data-DIhc_yva.js";import{C as N,a as P,b as C,c as D}from"./card-9e5eR-TL.js";import{C as se}from"./clock-BXrF9XKR.js";import{C as ne}from"./circle-check-LM3MRdPF.js";import{C as Pe}from"./circle-x-DJq7SFxD.js";import{T as Ce,a as De,b as U,c as E,d as Te,e as I}from"./table-DPilA-Lh.js";import{s as Re}from"./seniorDevelopersData-DFrZ6X3t.js";import{c as le,s as _e,a as oe,b as ce,d as Oe,e as Le,p as ke,r as Z,D as de,u as ue,f as ze,S as Ke,g as Me,h as xe,i as Be,j as me,k as $e,Z as pe,L as k,l as O,m as S,n as F,o as X,q as We,J as Fe,t as W,v as He,w as Ge,C as Ve,x as Ze,y as qe,z as he,A as Je,B as Qe,E as Ue,F as Xe,G as Ye,H as et,I as tt,K as at,M as rt,N as it,R as z,T as K}from"./CategoricalChart-WJAmy3lP.js";import{P as ve,a as fe}from"./PieChart-CsfmQ4gU.js";import{C as H,u as st,a as nt,b as lt}from"./tooltipContext-BhFxnOuu.js";import{L as ye}from"./Legend-121kkJQm.js";import{B as ge,a as je}from"./BarChart-gLJDjHRP.js";import{C as q}from"./CartesianGrid-BmRwr4Ov.js";import{u as ot,G as ct,C as dt,X as J,Y as Q}from"./CartesianChart-Kxs-tJ8o.js";import{S as Y,a as ut}from"./ActiveShapeUtils-tTCqnt4A.js";import{S as xt}from"./ErrorBarContext-BO_Rq41O.js";import{M as mt}from"./message-square-CpLMVWv4.js";import{T as pt}from"./triangle-alert-BFLjuX3_.js";import"./useQuery-DOA-4dB4.js";import"./PolarChart-D353rnxE.js";import"./graphicalItemSelectors-01I7ku9s.js";const ht=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vt=Ee("ban",ht);var ft=["option","isActive"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},L.apply(null,arguments)}function yt(e,r){if(e==null)return{};var a,i,s=gt(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function gt(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function jt(e){var{option:r,isActive:a}=e,i=yt(e,ft);return typeof r=="string"?l.createElement(Y,L({option:l.createElement(ut,L({type:r},i)),isActive:a,shapeType:"symbols"},i)):l.createElement(Y,L({option:r,isActive:a,shapeType:"symbols"},i))}var bt=(e,r,a,i,s,n,o)=>oe(e,"xAxis",r,o),At=(e,r,a,i,s,n,o)=>ce(e,"xAxis",r,o),wt=(e,r,a,i,s,n,o)=>oe(e,"yAxis",a,o),Et=(e,r,a,i,s,n,o)=>ce(e,"yAxis",a,o),It=(e,r,a,i)=>Oe(e,"zAxis",i,!1),St=(e,r,a,i,s)=>s,Nt=(e,r,a,i,s,n)=>n,Pt=(e,r,a,i,s,n,o)=>_e(e,void 0,void 0,o),Ct=le([Le,St],(e,r)=>e.filter(a=>a.type==="scatter").find(a=>a.id===r)),Dt=le([Pt,bt,At,wt,Et,It,Ct,Nt],(e,r,a,i,s,n,o,m)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:v}=e;if(o!=null){var x;if(o?.data!=null&&o.data.length>0?x=o.data:x=d?.slice(u,v+1),!(x==null||r==null||i==null||a==null||s==null||a?.length===0||s?.length===0))return Ht({displayedData:x,xAxis:r,yAxis:i,zAxis:n,scatterSettings:o,xAxisTicks:a,yAxisTicks:s,cells:m})}}),Tt=["id"],Rt=["onMouseEnter","onClick","onMouseLeave"],_t=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function V(e,r){if(e==null)return{};var a,i,s=Ot(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],r.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Ot(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},T.apply(null,arguments)}function ee(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,i)}return a}function g(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ee(Object(a),!0).forEach(function(i){Lt(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function Lt(e,r,a){return(r=kt(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function kt(e){var r=zt(e,"string");return typeof r=="symbol"?r:r+""}function zt(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Kt=e=>{var{dataKey:r,name:a,fill:i,legendType:s,hide:n}=e;return[{inactive:n,dataKey:r,type:s,color:i,value:xe(a,r),payload:e}]},Mt=l.memo(e=>{var{dataKey:r,points:a,stroke:i,strokeWidth:s,fill:n,name:o,hide:m,tooltipType:d,id:u}=e,v={dataDefinedOnItem:a?.map(x=>x.tooltipPayload),getPosition:x=>{var y;return a==null||(y=a[Number(x)])===null||y===void 0?void 0:y.tooltipPosition},settings:{stroke:i,strokeWidth:s,fill:n,nameKey:void 0,dataKey:r,name:xe(o,r),hide:m,type:d,color:n,unit:"",graphicalItemId:u}};return l.createElement($e,{tooltipEntrySettings:v})});function Bt(e){var{points:r,props:a}=e,{line:i,lineType:s,lineJointType:n}=a;if(!i)return null;var o=he(a),m=Ue(i),d,u;if(s==="joint")d=r.map(p=>{var c,h;return{x:(c=p.cx)!==null&&c!==void 0?c:null,y:(h=p.cy)!==null&&h!==void 0?h:null}});else if(s==="fitting"){var{xmin:v,xmax:x,a:y,b:A}=Xe(r),b=p=>y*p+A;d=[{x:v,y:b(v)},{x,y:b(x)}]}var f=g(g(g({},o),{},{fill:"none",stroke:o&&o.fill},m),{},{points:d});return l.isValidElement(i)?u=l.cloneElement(i,f):typeof i=="function"?u=i(f):u=l.createElement(Ye,T({},f,{type:n})),l.createElement(k,{className:"recharts-scatter-line",key:"recharts-scatter-line"},u)}function $t(e){var{showLabels:r,points:a,children:i}=e,s=Ge(),n=l.useMemo(()=>a?.map(o=>{var m,d,u={x:(m=o.x)!==null&&m!==void 0?m:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:o.width,height:o.height,lowerWidth:o.width,upperWidth:o.width};return g(g({},u),{},{value:void 0,payload:o.payload,viewBox:u,parentViewBox:s,fill:void 0})}),[s,a]);return l.createElement(Ve,{value:r?n:void 0},i)}function Wt(e){var{points:r,allOtherScatterProps:a}=e,{shape:i,activeShape:s,dataKey:n}=a,{id:o}=a,m=V(a,Tt),d=me(Ze),{onMouseEnter:u,onClick:v,onMouseLeave:x}=a,y=V(a,Rt),A=st(u,n,o),b=nt(x),f=lt(v,n,o);if(!qe(r))return null;var p=he(m);return l.createElement(l.Fragment,null,l.createElement(Bt,{points:r,props:m}),r.map((c,h)=>{var j=s!=null&&s!==!1,w=j&&d===String(h),M=j&&w?s:i,R=g(g(g({},p),c),{},{index:h,[Je]:String(o)});return l.createElement(pe,{key:"symbol-".concat(c?.cx,"-").concat(c?.cy,"-").concat(c?.size,"-").concat(h),zIndex:w?de.activeDot:void 0},l.createElement(k,T({className:"recharts-scatter-symbol"},Qe(y,c,h),{onMouseEnter:A(c,h),onMouseLeave:b(c,h),onClick:f(c,h)}),l.createElement(jt,T({option:M,isActive:w},R))))}))}function Ft(e){var{previousPointsRef:r,props:a}=e,{points:i,isAnimationActive:s,animationBegin:n,animationDuration:o,animationEasing:m}=a,d=r.current,u=We(a,"recharts-scatter-"),[v,x]=l.useState(!1),y=l.useCallback(()=>{x(!1)},[]),A=l.useCallback(()=>{x(!0)},[]),b=!v;return l.createElement($t,{showLabels:b,points:i},a.children,l.createElement(Fe,{animationId:u,begin:n,duration:o,isActive:s,easing:m,onAnimationEnd:y,onAnimationStart:A,key:u},f=>{var p=f===1?i:i?.map((c,h)=>{var j=d&&d[h];return j?g(g({},c),{},{cx:c.cx==null?void 0:W(j.cx,c.cx,f),cy:c.cy==null?void 0:W(j.cy,c.cy,f),size:W(j.size,c.size,f)}):g(g({},c),{},{size:W(0,c.size,f)})});return f>0&&(r.current=p),l.createElement(k,null,l.createElement(Wt,{points:p,allOtherScatterProps:a,showLabels:b}))}),l.createElement(He,{label:a.label}))}function Ht(e){var{displayedData:r,xAxis:a,yAxis:i,zAxis:s,scatterSettings:n,xAxisTicks:o,yAxisTicks:m,cells:d}=e,u=O(a.dataKey)?n.dataKey:a.dataKey,v=O(i.dataKey)?n.dataKey:i.dataKey,x=s&&s.dataKey,y=s?s.range:S.range,A=y&&y[0],b=a.scale.bandwidth?a.scale.bandwidth():0,f=i.scale.bandwidth?i.scale.bandwidth():0;return r.map((p,c)=>{var h=F(p,u),j=F(p,v),w=!O(x)&&F(p,x)||"-",M=[{name:O(a.dataKey)?n.name:a.name||String(a.dataKey),unit:a.unit||"",value:h,payload:p,dataKey:u,type:n.tooltipType},{name:O(i.dataKey)?n.name:i.name||String(i.dataKey),unit:i.unit||"",value:j,payload:p,dataKey:v,type:n.tooltipType}];w!=="-"&&s!=null&&M.push({name:s.name||s.dataKey,unit:s.unit||"",value:w,payload:p,dataKey:x,type:n.tooltipType});var R=X({axis:a,ticks:o,bandSize:b,entry:p,index:c,dataKey:u}),B=X({axis:i,ticks:m,bandSize:f,entry:p,index:c,dataKey:v}),G=w!=="-"&&s!=null?s.scale.map(w):A,$=G==null?0:Math.sqrt(Math.max(G,0)/Math.PI);return g(g({},p),{},{cx:R,cy:B,x:R==null?void 0:R-$,y:B==null?void 0:B-$,width:2*$,height:2*$,size:G,node:{x:h,y:j,z:w},tooltipPayload:M,tooltipPosition:{x:R,y:B},payload:p},d&&d[c]&&d[c].props)})}var Gt=(e,r,a)=>({x:e.cx,y:e.cy,value:Number(a==="x"?e.node.x:e.node.y),errorVal:F(e,r)});function Vt(e){var{hide:r,points:a,className:i,needClip:s,xAxisId:n,yAxisId:o,id:m}=e,d=l.useRef(null);if(r)return null;var u=Ie("recharts-scatter",i),v=m;return l.createElement(pe,{zIndex:e.zIndex},l.createElement(k,{className:u,clipPath:s?"url(#clipPath-".concat(v,")"):void 0,id:m},s&&l.createElement("defs",null,l.createElement(ct,{clipPathId:v,xAxisId:n,yAxisId:o})),l.createElement(xt,{xAxisId:n,yAxisId:o,data:a,dataPointFormatter:Gt,errorBarOffset:0},l.createElement(k,{key:"recharts-scatter-symbols"},l.createElement(Ft,{props:e,previousPointsRef:d})))))}var be={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:de.scatter};function Zt(e){var r=Z(e,be),{animationBegin:a,animationDuration:i,animationEasing:s,hide:n,isAnimationActive:o,legendType:m,lineJointType:d,lineType:u,shape:v,xAxisId:x,yAxisId:y,zAxisId:A}=r,b=V(r,_t),{needClip:f}=ot(x,y),p=l.useMemo(()=>Be(e.children,H),[e.children]),c=ue(),h=me(j=>Dt(j,x,y,A,e.id,p,c));return f==null||h==null?null:l.createElement(l.Fragment,null,l.createElement(Mt,{dataKey:e.dataKey,points:h,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),l.createElement(Vt,T({},b,{xAxisId:x,yAxisId:y,zAxisId:A,lineType:u,lineJointType:d,legendType:m,shape:v,hide:n,isAnimationActive:o,animationBegin:a,animationDuration:i,animationEasing:s,points:h,needClip:f})))}function qt(e){var r=Z(e,be),a=ue();return l.createElement(ze,{id:r.id,type:"scatter"},i=>l.createElement(l.Fragment,null,l.createElement(Ke,{legendPayload:Kt(r)}),l.createElement(Me,{type:"scatter",id:i,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:r.zAxisId,dataKey:r.dataKey,hide:r.hide,name:r.name,tooltipType:r.tooltipType,isPanorama:a}),l.createElement(Zt,T({},r,{id:i}))))}var Ae=l.memo(qt,ke);Ae.displayName="Scatter";function Jt(e){var r=et(),a=l.useRef(null);return l.useLayoutEffect(()=>{a.current===null?r(tt(e)):a.current!==e&&r(at({prev:a.current,next:e})),a.current=e},[e,r]),l.useLayoutEffect(()=>()=>{a.current&&(r(rt(a.current)),a.current=null)},[r]),null}var Qt={zAxisId:0,range:S.range,scale:S.scale,type:S.type};function we(e){var r=Z(e,Qt);return l.createElement(Jt,{domain:r.domain,id:r.zAxisId,dataKey:r.dataKey,name:r.name,unit:r.unit,range:r.range,scale:r.scale,type:r.type,allowDuplicatedCategory:S.allowDuplicatedCategory,allowDataOverflow:S.allowDataOverflow,reversed:S.reversed,includeHidden:S.includeHidden})}we.displayName="ZAxis";var Ut=["item"],Xt=l.forwardRef((e,r)=>l.createElement(dt,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ut,tooltipPayloadSearcher:it,categoricalChartProps:e,ref:r}));function Yt({metrics:e}){const r=[{title:"Total Reviews",value:e.totalReviews,icon:ie,color:"text-blue-600",description:"Code quality control layer"},{title:"Pending Reviews",value:e.pendingReviews,icon:se,color:"text-yellow-600",description:"Awaiting technical validation"},{title:"Approved Reviews",value:e.approvedReviews,icon:ne,color:"text-green-600",description:"Validated for deployment"},{title:"Rejected Reviews",value:e.rejectedReviews,icon:Pe,color:"text-red-600",description:"Quality standard not met"}];return t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(a=>t.jsxs(N,{children:[t.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(C,{className:"text-sm font-medium",children:a.title}),t.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),t.jsxs(D,{children:[t.jsx("div",{className:"text-2xl font-bold",children:a.value}),t.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]})]},a.title))})}function ea({reviews:e}){const r=Se(),a=n=>{switch(n){case"APPROVED":return t.jsx(_,{className:"bg-green-100 text-green-800 border-green-200",children:"APPROVED"});case"PENDING":return t.jsx(_,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"PENDING"});case"CHANGES_REQUESTED":return t.jsx(_,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"CHANGES"});case"REJECTED":return t.jsx(_,{className:"bg-red-100 text-red-800 border-red-200",children:"REJECTED"})}},i=n=>n>=90?"text-green-600":n>=75?"text-blue-600":n>=50?"text-orange-600":"text-red-600",s=n=>Re.find(o=>o.id===n)?.name||n;return t.jsxs(N,{className:"col-span-full",children:[t.jsx(P,{children:t.jsx(C,{children:"Code Quality Reviews"})}),t.jsx(D,{children:t.jsxs(Ce,{children:[t.jsx(De,{children:t.jsxs(U,{children:[t.jsx(E,{children:"Review Title"}),t.jsx(E,{children:"Project / Workflow"}),t.jsx(E,{children:"Agent / Dev"}),t.jsx(E,{children:"Reviewer"}),t.jsx(E,{children:"Type"}),t.jsx(E,{children:"Score"}),t.jsx(E,{children:"Status"}),t.jsx(E,{className:"text-right",children:"Action"})]})}),t.jsx(Te,{children:e.map(n=>t.jsxs(U,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>r(`/governance/code-reviews/${n.id}`),children:[t.jsx(I,{className:"font-medium",children:n.title}),t.jsx(I,{children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs font-semibold",children:n.projectId}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:n.workflowId})]})}),t.jsx(I,{className:"text-sm",children:n.agentId||"Human"}),t.jsx(I,{className:"text-sm",children:s(n.reviewerId)}),t.jsx(I,{children:t.jsx(_,{variant:"outline",className:"text-[10px]",children:n.reviewType})}),t.jsx(I,{children:t.jsx("span",{className:`font-bold ${i(n.qualityScore)}`,children:n.qualityScore>0?`${n.qualityScore}%`:"N/A"})}),t.jsx(I,{children:a(n.status)}),t.jsx(I,{className:"text-right",children:t.jsx("span",{className:"text-xs text-primary font-medium",children:"Inspect →"})})]},n.id))})]})})]})}const te=["#16a34a","#d97706","#f97316","#dc2626"];function ta({data:e}){return t.jsxs(N,{className:"col-span-1",children:[t.jsx(P,{children:t.jsx(C,{children:"Review Status Distribution"})}),t.jsx(D,{children:t.jsx("div",{className:"h-[250px] w-full",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(ve,{children:[t.jsx(fe,{data:e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:e.map((r,a)=>t.jsx(H,{fill:te[a%te.length]},`cell-${a}`))}),t.jsx(K,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),t.jsx(ye,{verticalAlign:"bottom",height:36})]})})})})]})}const ae=["#16a34a","#3b82f6","#f97316","#dc2626"];function aa({data:e}){return t.jsxs(N,{className:"col-span-1",children:[t.jsx(P,{children:t.jsx(C,{children:"Quality Score Distribution"})}),t.jsx(D,{children:t.jsx("div",{className:"h-[250px] w-full",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(ge,{data:e,children:[t.jsx(q,{strokeDasharray:"3 3",vertical:!1}),t.jsx(J,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:9}}),t.jsx(Q,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),t.jsx(K,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),t.jsx(je,{dataKey:"value",radius:[4,4,0,0],children:e.map((r,a)=>t.jsx(H,{fill:ae[a%ae.length]},`cell-${a}`))})]})})})})]})}function ra({data:e}){return t.jsxs(N,{className:"col-span-1",children:[t.jsx(P,{children:t.jsx(C,{children:"Defect Density vs Quality Score"})}),t.jsx(D,{children:t.jsx("div",{className:"h-[250px] w-full",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(Xt,{margin:{top:20,right:20,bottom:20,left:20},children:[t.jsx(q,{strokeDasharray:"3 3"}),t.jsx(J,{type:"number",dataKey:"score",name:"Quality Score",unit:"%",domain:[0,100]}),t.jsx(Q,{type:"number",dataKey:"defects",name:"Defect Count"}),t.jsx(we,{type:"category",dataKey:"name",name:"Review ID"}),t.jsx(K,{cursor:{strokeDasharray:"3 3"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),t.jsx(Ae,{name:"Reviews",data:e,fill:"#8884d8"})]})})})})]})}const re=["#8b5cf6","#3b82f6"];function ia({data:e}){return t.jsxs(N,{className:"col-span-1",children:[t.jsx(P,{children:t.jsx(C,{children:"AI vs Human Review Volume"})}),t.jsx(D,{children:t.jsx("div",{className:"h-[250px] w-full",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(ve,{children:[t.jsx(fe,{data:e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"reviews",children:e.map((r,a)=>t.jsx(H,{fill:re[a%re.length]},`cell-${a}`))}),t.jsx(K,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),t.jsx(ye,{verticalAlign:"bottom",height:36})]})})})})]})}function sa({data:e}){return t.jsxs(N,{className:"col-span-1",children:[t.jsx(P,{children:t.jsx(C,{children:"Reviewer Workload"})}),t.jsx(D,{children:t.jsx("div",{className:"h-[250px] w-full",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(ge,{data:e,layout:"vertical",margin:{left:20},children:[t.jsx(q,{strokeDasharray:"3 3",horizontal:!1}),t.jsx(J,{type:"number",hide:!0}),t.jsx(Q,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fontSize:10},width:80}),t.jsx(K,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),t.jsx(je,{dataKey:"reviews",fill:"#6366f1",radius:[0,4,4,0],barSize:20})]})})})})]})}function na({reviews:e,comments:r}){const a=[...e.map(s=>({id:`cre-${s.id}`,type:"CREATED",title:`Review Created: ${s.title}`,timestamp:s.createdAt,user:s.agentId||"System"})),...e.filter(s=>s.reviewedAt).map(s=>({id:`dec-${s.id}`,type:"DECISION",title:`Review ${s.status.replace("_"," ")}`,timestamp:s.reviewedAt,status:s.status,user:s.reviewerId})),...r.map(s=>({id:`com-${s.id}`,type:"COMMENT",title:"New Comment",timestamp:s.timestamp,user:s.reviewer,severity:s.severity}))].sort((s,n)=>new Date(n.timestamp).getTime()-new Date(s.timestamp).getTime()),i=s=>{if(s.type==="CREATED")return t.jsx(ie,{className:"h-4 w-4 text-blue-500"});if(s.type==="COMMENT")return t.jsx(mt,{className:"h-4 w-4 text-purple-500"});switch(s.status){case"APPROVED":return t.jsx(ne,{className:"h-4 w-4 text-green-500"});case"CHANGES_REQUESTED":return t.jsx(pt,{className:"h-4 w-4 text-orange-500"});case"REJECTED":return t.jsx(vt,{className:"h-4 w-4 text-red-500"});default:return t.jsx(se,{className:"h-4 w-4 text-yellow-500"})}};return t.jsxs(N,{className:"col-span-1",children:[t.jsx(P,{children:t.jsx(C,{children:"Review Activity Timeline"})}),t.jsx(D,{children:t.jsx("div",{className:"space-y-6",children:a.map(s=>t.jsxs("div",{className:"relative pl-8 before:absolute before:left-[15px] before:top-2 before:bottom-[-24px] before:w-[2px] before:bg-muted last:before:hidden",children:[t.jsx("div",{className:"absolute left-0 top-1 rounded-full border bg-background p-1.5 z-10",children:i(s)}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-semibold",children:s.title}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:new Date(s.timestamp).toLocaleString()})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.jsxs("span",{children:["User: ",t.jsx("span",{className:"text-foreground",children:s.user})]}),s.severity&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"•"}),t.jsxs(_,{variant:"outline",className:`text-[8px] h-4 ${s.severity==="HIGH"?"text-red-600 border-red-200":s.severity==="MEDIUM"?"text-orange-600 border-orange-200":"text-blue-600 border-blue-200"}`,children:[s.severity," SEVERITY"]})]})]})]})]},s.id))})})]})}function Ca(){const{reviews:e,comments:r,metrics:a,statusDistribution:i,qualityScoreDistribution:s,defectDensityData:n,aiVsHumanData:o,reviewerWorkload:m,isLoading:d}=Ne();return d?t.jsx("div",{children:"Loading Code Quality Layer..."}):t.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Code Review Governance"}),t.jsx("p",{className:"text-muted-foreground",children:"Technical validation, security checks, and quality assurance."})]}),t.jsx(Yt,{metrics:a}),t.jsx(ea,{reviews:e||[]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsx(ta,{data:i}),t.jsx(aa,{data:s})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsx(ra,{data:n}),t.jsx(ia,{data:o})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsx(sa,{data:m}),t.jsx(na,{reviews:e||[],comments:r||[]})]})]})}export{Ca as default};
